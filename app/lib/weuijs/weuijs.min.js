function Router(t){function e(){var t=location.hash.slice(1)||"/",e=i.routes[t];i.el&&e&&(i.el.innerHTML=e.render(),"function"==typeof e.bind&&e.bind.call(i.el))}this.el=document.getElementById(t||"view"),this.routes={};var i=this;window.addEventListener("hashchange",e),window.addEventListener("load",e)}!function(t){function e(e){n=t('<div class="weui-mask_transparent actionsheet__mask"></div>').appendTo(document.body);var i=e.actions||[],s=i.map(function(t,e){return'<div class="weui-actionsheet__cell '+(t.className||"")+'">'+t.text+"</div>"}).join(""),o='<div class="weui-actionsheet" id="weui-actionsheet"><div class="weui-actionsheet__menu">'+s+'</div><div class="weui-actionsheet__action"><div class="weui-actionsheet__cell">取消</div></div></div>';a=t(o).appendTo(document.body),a.find(".weui-actionsheet__menu .weui-actionsheet__cell, .weui-actionsheet__action .weui-actionsheet__cell").each(function(n,a){t(a).click(function(){t.closeActionsheet(),e.onClose&&e.onClose(),i[n]&&i[n].onClick&&i[n].onClick()})}),n.show().addClass("actionsheet__mask_show"),a.show().addClass("weui-actionsheet_toggle")}function i(){n.removeClass("actionsheet__mask_show"),a.removeClass("weui-actionsheet_toggle").on("transitionend webkitTransitionEnd",function(){n&&n.remove(),a&&a.remove(),n=null,a=null})}var n,a;t.actionsheet=function(i){i=t.extend({},t.actionsheet.defaults,i),e(i)},t.closeActionsheet=function(){i()},t(document).on("click",".actionsheet__mask",function(){t.closeActionsheet()}),t.actionsheet.defaults={onClose:void 0}}($),function(t){function e(){i&&i.remove(),i=null}var i;t.messager={show:function(n){var a=t.extend({},t.messager.defaults,n),s=template.compile(a.dialogTempalte);return e(),i=t(s(a)).appendTo("body"),i.find(".weui-dialog__btn").each(function(i,n){t(n).click(function(){e(),a.buttons[i].onClick&&a.buttons[i].onClick()})}),i},alert:function(e,i,n){return t.messager.show({title:e,msg:i,buttons:[{text:t.messager.defaults.buttonOK,btnCls:"primary",onClick:n}]})},confirm:function(e,i,n){return t.messager.show({title:e,msg:i,buttons:[{text:t.messager.defaults.buttonCancel,btnCls:"default",onClick:function(){n(!1)}},{text:t.messager.defaults.buttonOK,btnCls:"primary",onClick:function(){n(!0)}}]})}},t.messager.defaults={title:null,msg:null,buttonOK:"确定",buttonCancel:"取消",buttons:[{text:"确定",btnCls:"primary"}],dialogTempalte:'<div class="dialog"> <div class="weui-mask"></div> <div class="weui-dialog"> <div class="weui-dialog__hd"><strong class="weui-dialog__title">{{title}}</strong></div> <div class="weui-dialog__bd">{{msg}}</div> <div class="weui-dialog__ft"> {{each buttons as button i}} <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_{{button.btnCls}}">{{button.text}}</a> {{/each}} </div> </div> </div>'}}($),function(t){function e(e,i){function n(i){var n=t(e);for(var s in i){var o=i[s];a(s,o)||(n.find('input[name="'+s+'"]').val(o),n.find('textarea[name="'+s+'"]').val(o),n.find('select[name="'+s+'"]').val(o))}}function a(i,n){var a=t(e).find('input[name="'+i+'"][type=radio], input[name="'+i+'"][type=checkbox]');return!!a.length&&(a.each(function(){s(t(this).val(),n)&&t(this).prop("checked",!0)}),!0)}function s(e,i){return e==String(i)||t.inArray(e,t.isArray(i)?i:[i])>=0}"string"==typeof i?t.ajax({url:i,dataType:"json",success:function(t){n(t)}}):n(i)}function i(e){t("input,select,textarea",e).each(function(){var t=this.type,e=this.tagName.toLowerCase();"text"==t||"password"==t||"textarea"==e?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==e&&(this.selectedIndex=-1)})}function n(t){t.reset()}function a(e){if(t.fn.validate){var i=t(e);i.find(".validate-text:not(:disabled)").validate("validate");var n=i.find(".validate-invalid");n.filter(":not(:disabled)").first().focus().validate("showTip");return 0==n.length}return!0}t.fn.form=function(e,i){if("string"==typeof e)return t.fn.form.methods[e](this,i)},t.fn.form.methods={load:function(t,i){return t.each(function(){e(this,i)})},clear:function(t){return t.each(function(){i(this)})},reset:function(t){return t.each(function(){n(this)})},validate:function(t){return a(t[0])}}}($),function(t){function e(e,i){var n=t(e),a=n.data("infinite").options;n[i?"off":"on"]("scroll",function(){var t=n[0].scrollHeight-(n.height()+n.scrollTop());t<=a.distance&&n.trigger("infinite")})}t.fn.infinite=function(i,n){return"string"==typeof i?t.fn.infinite.methods[i](this,n):(i=i||{},this.each(function(){var n=t(this).data("infinite");n?t.extend(n.options,i):(t(this).data("infinite",{options:t.extend({},t.fn.infinite.defaults,i)}),e(this))}))},t.fn.infinite.methods={options:function(e){return t.data(e[0],"infinite").options},destroy:function(t){return t.each(function(){e(this,!0)})}},t.fn.infinite.defaults={distance:50}}($),function(t){t.parser={parseOptions:function(e,i){var n=t(e),a={},s=t.trim(n.attr("data-options"));if(s&&("{"!=s.substring(0,1)&&(s="{"+s+"}"),a=new Function("return "+s)()),i){for(var o={},l=0;l<i.length;l++){var r=i[l];if("string"==typeof r)"width"==r||"height"==r||"left"==r||"top"==r?o[r]=parseInt(e.style[r])||void 0:o[r]=n.attr(r);else for(var c in r){var u=r[c];"boolean"==u?o[c]=n.attr(c)?"true"==n.attr(c):void 0:"number"==u&&(o[c]="0"==n.attr(c)?0:parseFloat(n.attr(c))||void 0)}}t.extend(a,o)}return a}}}($),function(t){function e(e){var i=t(e),n=i.data("pull-to-refresh").options,s=template.compile(a);i.addClass("weui-pull-to-refresh").prepend(s(n))}function i(e){function i(t){return t>0&&0==r.scrollTop()?"down":t<0&&r[0].scrollHeight-r.height()-r.scrollTop()==0?"up":null}function n(t){r.hasClass("weui-pull-refreshing")||(o={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY},l=0)}function a(t){if(!r.hasClass("weui-pull-refreshing")){if(!o)return!1;var e={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY};l=e.y-o.y;var n=i(l);"down"==n&&(l=Math.pow(l,.8),r.css("transform","translate3d(0, "+l+"px, 0)"),r.removeClass("weui-pull-down weui-pull-refresh"),l<c.distance?r.addClass("weui-pull-down"):r.removeClass("weui-pull-down").addClass("weui-pull-refresh"))}}function s(t){if(o=!1,!r.hasClass("weui-pull-refreshing")){var e=i(l);"down"==e&&(r.removeClass("weui-pull-down weui-pull-refresh"),r.css("transform",""),l<=c.distance||(r.addClass("weui-pull-refreshing"),r.trigger("pull-to-refresh")))}}var o,l,r=t(e),c=r.data("pull-to-refresh").options;r.on("touchstart",n),r.on("touchmove",a),r.on("touchend",s)}function n(e){t(e).removeClass("weui-pull-refreshing")}t.fn.pullToRefresh=function(n,a){return"string"==typeof n?t.fn.pullToRefresh.methods[n](this,a):(n=n||{},this.each(function(){var a=t(this).data("pull-to-refresh");a?t.extend(a.options,n):(t(this).data("pull-to-refresh",{options:t.extend({},t.fn.pullToRefresh.defaults,n)}),e(this),i(this))}))},t.fn.pullToRefresh.methods={options:function(e){return t.data(e[0],"pull-to-refresh").options},done:function(t){return t.each(function(){n(this)})}},t.fn.pullToRefresh.defaults={distance:50};var a='<div class="weui-pull-to-refresh-layer"> <div class="weui-pull-down-inner"><i class="iconfont icon-down"></i>下拉刷新</div> <div class="weui-pull-refresh-inner"><i class="iconfont icon-refresh"></i>释放刷新</div> <div class="weui-pull-refreshing-inner"><i class="iconfont icon-refresh"></i>正在刷新</div> </div>'}($),Router.prototype.push=function(t,e){return this.routes[t]=e,this}(function(t){function e(e){var i=t(e).data("searchbar"),n=i.options,a=t(e).find("form.weui-search-bar__form");a.off("submit").on("submit",function(){n.onSearch&&n.onSearch.call(this)}),t(e).off("click").on("click",".search-bar__search-btn",function(t){a.trigger("submit")})}t.fn.searchbar=function(i,n){return i=i||{},this.each(function(){var n=t(this).data("searchbar");n?t.extend(n.options,i):t(this).data("searchbar",{options:t.extend({},t.fn.searchbar.defaults,i)}),e(this)})},t.fn.searchbar.defaults={onSearch:null}})($),function(t){function e(e){var i=t(e).data("select"),n=(i.options,template.compile(r));i.panel=t(n(i.options)).appendTo("body"),i.toolbar=i.panel.children("div.toolbar"),i.list=i.panel.children("div.select__content")}function i(e){var i=t(e).data("select");t(e).off("click").on("click",function(t){o(e)}),i.toolbar.off("click").on("click",".toolbar-close",function(t){l(e)}).on("click",".toolbar-back",function(t){if(0==i.values.length)l(e);else{var n=i.values.splice(i.values.length-1,1);s(e,n[0].items)}}),i.list.off("change").on("change",function(a){var o=t(a.target).val(),r=n(i.items,"value",o);if(i.values.push({item:r,items:i.items}),r&&r.items)s(e,r.items);else{var c=i.values.map(function(t,e){return t.item.text}).join(i.options.split),u=i.values.map(function(t,e){return t.item.value}).join(i.options.split);t(e).val(c).attr("data-values",u),l(e)}})}function n(t,e,i){for(var n=0;n<t.length;n++){var a=t[n];if(a[e]==i)return a}return null}function a(e){var i=t(e).data("select"),n=i.options;n.items=n.items.map(function(t,e){return"string"==typeof t?{text:t,value:t}:t}),s(e,n.items)}function s(e,i){var n=t(e).data("select"),a=(n.options,template.compile(c));n.items=i,n.list.html(a(n))}function o(e){var i=t(e).data("select"),n=i.options;i.values=[],s(e,n.items),i.panel.addClass("select_toggle")}function l(e){var i=t(e).data("select");i.panel.removeClass("select_toggle")}t.fn.select=function(n,s){return"string"==typeof n?t.fn.select.methods[n](this,s):(n=n||{},this.each(function(){var s,o=t(this).data("select");o?s=t.extend(o.options,n):(s=t.extend({},t.fn.select.defaults,n),t(this).data("select",{options:s}),e(this)),a(this),i(this)}))},t.fn.select.methods={options:function(e){return t.data(e[0],"select").options},open:function(t){return t.each(function(){o(this)})},close:function(t){return t.each(function(){l(this)})}},t.fn.select.defaults={items:[],title:"请选择",closeText:"关闭",backText:"返回",onChange:null,onClose:null,onOpen:null,split:" "};var r='<div class="select"> <div class="toolbar"> <div class="toolbar-inner"> <a href="javascript:;" class="toolbar-back">{{backText}}</a> <h1 class="toolbar-title">{{title}}</h1> <a href="javascript:;" class="toolbar-close">{{closeText}}</a></div> </div> <div class="select__content"></div> </div>',c='<div class="weui-cells weui-cells_radio"> {{each items as item i}} <label class="weui-cell weui-check__label"> <div class="weui-cell__bd"> <p>{{item.text}}</p> </div> <div class="weui-cell__ft"> <input type="radio" class="weui-check" name="select" value="{{item.value}}"> <span class="weui-icon-checked"></span> </div> </label> {{/each}} </div>'}($),function(t){function e(e){t(e).on("click",".weui-tabbar__item",function(){t(this).addClass("weui-bar__item_on").siblings(".weui-bar__item_on").removeClass("weui-bar__item_on")})}t.fn.tabbar=function(){return this.each(function(){e(this)})}}($),function(t){function e(e,s){e=e||{};var o=t.extend({},t.toast.defaults,e),l=template.compile(a);n=t(l(o)).appendTo("body"),s||setTimeout(function(){i(o)},o.duration)}function i(t){n.remove(),n=null,t&&t.callback&&t.callback(this)}var n;t.toast=function(e,i){if("string"==typeof e)return t.toast.methods[e](i)},t.toast.methods={show:function(t){e(t,!1)},showLoading:function(i){e(t.extend({msg:"数据加载中",iconCls:"weui-loading"},i),!0)},hideLoading:function(t){i()}},t.toast.defaults={duration:2e3,msg:"操作成功",iconCls:"weui-icon-success-no-circle",plain:!1,callback:null};var a='<div style="display: block;"> <div class="weui-mask_transparent"></div> <div class="weui-toast {{if plain}}toast-text{{/if}}"> <i class="weui-icon_toast {{iconCls}}"></i> <p class="weui-toast__content">{{msg}}</p> </div> </div>'}($),function(t){function e(e){e=e||{};var s=t.extend({},t.toptip.defaults,e),o=template.compile(a);n&&i(s),n=t(o(s)).appendTo("body"),setTimeout(function(){i(s)},s.duration)}function i(t){n.remove(),n=null,t&&t.callback&&t.callback(this)}var n;t.toptip=function(e,i){if("string"==typeof e)return t.toptip.methods[e](i)},t.toptip.methods={show:function(t){e(t)}},t.toptip.defaults={duration:2e3,msg:"操作成功",callback:null};var a='<div class="weui-toptips weui-toptips_warn" style="display: block;">{{msg}}</div>'}($),function($){function init(t){$(t).addClass("validate-text")}function showTip(t){if(t){var e=$(t).data("validate");$.toptip("show",{msg:e.message})}}function validate(target){function setTipMessage(t){state.message=t.replace(new RegExp("\\{title\\}","g"),opts.title)}function validateRule(validType){var result=/([a-zA-Z_]+)(.*)/.exec(validType),rule=opts.rules[result[1]];if(value&&rule){var param=eval(result[2]);if(!rule.validator.call(target,value,param)){var message=rule.message;if(param)for(var i=0;i<param.length;i++)message=message.replace(new RegExp("\\{"+i+"\\}","g"),param[i]);return setTipMessage(opts.invalidMessage||message),t.addClass("validate-invalid"),!1}}return!0}var state=$(target).data("validate"),opts=state.options,t=$(target),value=t.val();if(opts.required&&(""===value||null===value))return setTipMessage(opts.missingMessage),t.addClass("validate-invalid"),!1;if(opts.validType)if($.isArray(opts.validType)){for(var i=0;i<opts.validType.length;i++)if(!validateRule(opts.validType[i]))return!1}else if(!validateRule(opts.validType))return!1;return!0}$.fn.validate=function(t,e){return"string"==typeof t?$.fn.validate.methods[t](this,e):(t=t||{},this.each(function(){var e=$(this).data("validate");e?$.extend(e.options,t):$(this).data("validate",{options:$.extend({},$.fn.validate.defaults,$.fn.validate.parseOptions(this),t)}),init(this)}))},$.fn.validate.methods={options:function(t){return $.data(t[0],"validate").options},validate:function(t){return t.each(function(){validate(this)})},isValid:function(t){return validate(t[0])},showTip:function(t){return showTip(t[0])}},$.fn.validate.parseOptions=function(t){return $.parser.parseOptions(t,["title","required"])},$.fn.validate.defaults={title:null,required:!1,validType:null,missingMessage:"{title}为必输项",invalidMessage:null,rules:{length:{validator:function(t,e){var i=$.trim(t).length;return i>=e[0]&&i<=e[1]},message:"{title}输入内容长度必须介于{0}和{1}之间"}}}}($);