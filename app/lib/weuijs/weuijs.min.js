<<<<<<< HEAD
!function(t){function e(e){var i=template.compile(o),n=e.actions||[];isAdnroid=e.android,t.closeActionsheet(),a=t(i(e)).appendTo("body").data("actionsheet",{options:e}),a.find(".weui-actionsheet__menu .weui-actionsheet__cell, .weui-actionsheet__action .weui-actionsheet__cell").each(function(i,a){t(a).click(function(){t.closeActionsheet(),e.onClose&&e.onClose(),n[i]&&n[i].onClick&&n[i].onClick()})}),a.children(".weui-mask").fadeIn(200).on("click",function(){t.closeActionsheet()}),a.children(".weui-actionsheet").addClass("weui-actionsheet_toggle")}function i(){a&&a.remove(),a=null}function n(){if(a){var t=a.data("actionsheet").options;a.children(".weui-mask").fadeOut(200),t.android?a.children(".weui-actionsheet").fadeOut(200,i):a.children(".weui-actionsheet").removeClass("weui-actionsheet_toggle").on("transitionend webkitTransitionEnd",i)}}var a;t.actionsheet=function(i){i=t.extend({},t.actionsheet.defaults,i),e(i)},t.closeActionsheet=function(){n()},t.actionsheet.defaults={android:!1,actions:[],onClose:void 0};var o='<div class="{{if android}}weui-skin_android{{/if}}"> <div class="weui-mask actionsheet__mask"></div> <div class="weui-actionsheet weui-actionsheet_toggle"> <div class="weui-actionsheet__menu"> {{each actions as action i}} <div class="weui-actionsheet__cell {{if action.className}}{{action.className}}{{/if}}">{{action.text}}</div> {{/each}} </div> <div class="weui-actionsheet__action"> <div class="weui-actionsheet__cell">取消</div> </div> </div> </div>'}($),function(t){function e(){i&&i.remove(),i=null}var i;t.dialog={show:function(n){var a=t.extend({},t.dialog.defaults,n),o=template.compile(a.dialogTempalte);return e(),i=t(o(a)).appendTo("body"),i.find(".weui-dialog__btn").each(function(i,n){t(n).click(function(){e(),a.buttons[i].onClick&&a.buttons[i].onClick()})}),i},alert:function(e,i,n){return t.dialog.show({title:e,msg:i,buttons:[{text:t.dialog.defaults.buttonOK,btnCls:"primary",onClick:n}]})},confirm:function(e,i,n){return t.dialog.show({title:e,msg:i,buttons:[{text:t.dialog.defaults.buttonCancel,btnCls:"default",onClick:function(){n(!1)}},{text:t.dialog.defaults.buttonOK,btnCls:"primary",onClick:function(){n(!0)}}]})}},t.dialog.defaults={title:null,msg:null,buttonOK:"确定",buttonCancel:"取消",buttons:[{text:"确定",btnCls:"primary"}],dialogTempalte:'<div class="dialog"> <div class="weui-mask"></div> <div class="weui-dialog"> <div class="weui-dialog__hd"><strong class="weui-dialog__title">{{title}}</strong></div> <div class="weui-dialog__bd">{{msg}}</div> <div class="weui-dialog__ft"> {{each buttons as button i}} <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_{{button.btnCls}}">{{button.text}}</a> {{/each}} </div> </div> </div>'}}($),function(t){function e(e,i){function n(i){var n=t(e);for(var o in i){var s=i[o];a(o,s)||(n.find('input[name="'+o+'"]').val(s),n.find('textarea[name="'+o+'"]').val(s),n.find('select[name="'+o+'"]').val(s))}}function a(i,n){var a=t(e).find('input[name="'+i+'"][type=radio], input[name="'+i+'"][type=checkbox]');return!!a.length&&(a.each(function(){o(t(this).val(),n)&&t(this).prop("checked",!0)}),!0)}function o(e,i){return e==String(i)||t.inArray(e,t.isArray(i)?i:[i])>=0}"string"==typeof i?t.ajax({url:i,dataType:"json",success:function(t){n(t)}}):n(i)}function i(e){t("input,select,textarea",e).each(function(){var t=this.type,e=this.tagName.toLowerCase();"text"==t||"password"==t||"textarea"==e?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==e&&(this.selectedIndex=-1)})}function n(t){t.reset()}function a(e){if(t.fn.validate){var i=t(e);i.find(".validate-text:not(:disabled)").validate("validate");var n=i.find(".validate-invalid");n.filter(":not(:disabled)").first().focus().validate("showTip");return 0==n.length}return!0}t.fn.form=function(e,i){if("string"==typeof e)return t.fn.form.methods[e](this,i)},t.fn.form.methods={load:function(t,i){return t.each(function(){e(this,i)})},clear:function(t){return t.each(function(){i(this)})},reset:function(t){return t.each(function(){n(this)})},validate:function(t){return a(t[0])}}}($),function(t){function e(e){var i=e,n=template.compile(o);t.gallery("close"),a=t(n(i)).appendTo("body").data("gallery",{options:i}),a.on("click",".gallery__back-btn",function(){t.gallery("close")}).on("click",".gallery__delete-btn",function(){t.dialog.confirm("提示","是否删除当前内容?",function(e){e&&(t.gallery("close"),i.onDelete&&i.onDelete())})})}function i(){a&&a.remove(),a=null}function n(){a&&a.fadeOut(200,i)}var a;t.gallery=function(i,n){return"string"==typeof i?t.gallery.methods[i](n):(i=t.extend({},t.gallery.defaults,i),void e(i))},t.gallery.methods={close:function(t){n()}},t.gallery.defaults={deletable:!0,imageUrl:null,onDelete:void 0};var o='<div class="weui-gallery" style="display: block"> <span class="weui-gallery__img" style="background-image: url({{imageUrl}});"></span> <div class="weui-gallery__opr"> <a href="javascript:" class="gallery__back-btn" style="display: inline-block;"> <i class="icon-back_gallery"></i> </a> {{if deletable}} &nbsp; <a href="javascript:" class="gallery__delete-btn" style="display: inline-block;"> <i class="weui-icon-delete weui-icon_gallery-delete"></i> </a> {{/if}} </div> </div>'}($),function(t){function e(e,i){var n=t(e),a=n.data("infinite").options;n[i?"off":"on"]("scroll",function(){var t=n[0].scrollHeight-(n.height()+n.scrollTop());t<=a.distance&&n.trigger("infinite")})}t.fn.infinite=function(i,n){return"string"==typeof i?t.fn.infinite.methods[i](this,n):(i=i||{},this.each(function(){var n=t(this).data("infinite");n?t.extend(n.options,i):(t(this).data("infinite",{options:t.extend({},t.fn.infinite.defaults,i)}),e(this))}))},t.fn.infinite.methods={destroy:function(t){return t.each(function(){e(this,!0)})}},t.fn.infinite.defaults={distance:50}}($),function(t){function e(e,i){var n=t(e).data("pagination"),o=n.options,s=Math.ceil(n.data.total/o.pageSize);i>s&&(i=s),i<1&&(i=1),a(e),o.pageNumber=i}function i(i){var n=t(i).data("pagination"),a=n.options,o=Math.ceil(n.data.total/a.pageSize);a.pageNumber<o&&e(i,a.pageNumber+1)}function n(e,i){var n=t(e).data("pagination"),a=n.options;t.isArray(i)?i={rows:i,total:i.length}:i.total=parseInt(i.total||i.rows.length),n.data=i,a.onLoadSuccess&&a.onLoadSuccess.call(e,i)}function a(e){var i=t(e).data("pagination"),a=i.options;if(!a.url)return!1;var o=t.extend({},a.queryParams);t.extend(o,{page:a.pageNumber,rows:a.pageSize}),t.toast("showLoading"),t.ajax({type:a.method,url:a.url,data:t.toJSON(o),contentType:"application/json",dataType:"json",success:function(i){t.toast("hideLoading"),0==i.errcode?n(e,i):a.onLoadError&&a.onLoadError.call(e)},error:function(){t.toast("hideLoading"),a.onLoadError&&a.onLoadError.call(e)}})}t.fn.pagination=function(i,n){return"string"==typeof i?t.fn.pagination.methods[i](this,n):(i=i||{},this.each(function(){var n,a=t(this).data("pagination");a?n=t.extend(a.options,i):(n=t.extend({},t.fn.pagination.defaults,i),t(this).data("pagination",{options:n,data:{total:0,rows:[]}})),e(this,n.pageNumber)}))},t.fn.pagination.methods={select:function(t,i){return t.each(function(){e(this,i)})},next:function(t){return t.each(function(){i(this)})}},t.fn.pagination.defaults={method:"post",url:null,pageSize:20,pageNumber:1,queryParams:{},onLoadSuccess:function(t){},onLoadError:function(){}}}($),function(t){t.parser={parseOptions:function(e,i){var n=t(e),a={},o=t.trim(n.attr("data-options"));if(o&&("{"!=o.substring(0,1)&&(o="{"+o+"}"),a=new Function("return "+o)()),i){for(var s={},l=0;l<i.length;l++){var r=i[l];if("string"==typeof r)"width"==r||"height"==r||"left"==r||"top"==r?s[r]=parseInt(e.style[r])||void 0:s[r]=n.attr(r);else for(var c in r){var u=r[c];"boolean"==u?s[c]=n.attr(c)?"true"==n.attr(c):void 0:"number"==u&&(s[c]="0"==n.attr(c)?0:parseFloat(n.attr(c))||void 0)}}t.extend(a,s)}return a}}}($),function(t){function e(e){t(e).addClass("popup_toggle")}function i(e){t(e).removeClass("popup_toggle")}t.fn.popup=function(e,i){if("string"==typeof e)return t.fn.popup.methods[e](this,i)},t.fn.popup.methods={open:function(t){return t.each(function(){e(this)})},close:function(t){return t.each(function(){i(this)})}}}($),function(t){function e(e){var i=t(e),n=i.data("pull-to-refresh").options,o=template.compile(a);i.addClass("weui-pull-to-refresh").prepend(o(n))}function i(e){function i(t){return t>0&&0==r.scrollTop()?"down":t<0&&r[0].scrollHeight-r.height()-r.scrollTop()==0?"up":null}function n(t){r.hasClass("weui-pull-refreshing")||(s={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY},l=0)}function a(t){if(!r.hasClass("weui-pull-refreshing")){if(!s)return!1;var e={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY};l=e.y-s.y;var n=i(l);"down"==n&&(l=Math.pow(l,.8),r.css("transform","translate3d(0, "+l+"px, 0)"),r.removeClass("weui-pull-down weui-pull-refresh"),l<c.distance?r.addClass("weui-pull-down"):r.removeClass("weui-pull-down").addClass("weui-pull-refresh"))}}function o(t){if(s=!1,!r.hasClass("weui-pull-refreshing")){var e=i(l);"down"==e&&(r.removeClass("weui-pull-down weui-pull-refresh"),r.css("transform",""),l<=c.distance||(r.addClass("weui-pull-refreshing"),r.trigger("pull-to-refresh")))}}var s,l,r=t(e),c=r.data("pull-to-refresh").options;r.on("touchstart",n),r.on("touchmove",a),r.on("touchend",o)}function n(e){t(e).removeClass("weui-pull-refreshing")}t.fn.pullToRefresh=function(n,a){return"string"==typeof n?t.fn.pullToRefresh.methods[n](this,a):(n=n||{},this.each(function(){var a=t(this).data("pull-to-refresh");a?t.extend(a.options,n):(t(this).data("pull-to-refresh",{options:t.extend({},t.fn.pullToRefresh.defaults,n)}),e(this),i(this))}))},t.fn.pullToRefresh.methods={options:function(e){return t.data(e[0],"pull-to-refresh").options},done:function(t){return t.each(function(){n(this)})}},t.fn.pullToRefresh.defaults={distance:50};var a='<div class="weui-pull-to-refresh-layer"> <div class="weui-pull-down-inner"><i class="iconfont icon-down"></i>下拉刷新</div> <div class="weui-pull-refresh-inner"><i class="iconfont icon-refresh"></i>释放刷新</div> <div class="weui-pull-refreshing-inner"><i class="iconfont icon-refresh"></i>正在刷新</div> </div>'}($),function(t){function e(e){var i=t(e).data("searchbar"),n=i.options,a=t(e).find("form.weui-search-bar__form");a.off("submit").on("submit",function(t){t.preventDefault(),n.onSearch&&n.onSearch.call(this)}),t(e).off("click").on("click",".search-bar__search-btn",function(t){a.trigger("submit")})}t.fn.searchbar=function(i,n){return i=i||{},this.each(function(){var n=t(this).data("searchbar");n?t.extend(n.options,i):t(this).data("searchbar",{options:t.extend({},t.fn.searchbar.defaults,i)}),e(this)})},t.fn.searchbar.defaults={onSearch:null}}($),function(t){function e(e){var i=t(e).data("select"),n=(i.options,template.compile(r));i.panel=t(n(i.options)).appendTo("body"),i.toolbar=i.panel.children("div.toolbar"),i.list=i.panel.children("div.select__content")}function i(e){var i=t(e).data("select"),a=i.options;t(e).off("click").on("click",function(t){s(e)}),i.toolbar.off("click").on("click",".toolbar__close-btn",function(t){l(e)}).on("click",".toolbar__back-btn",function(t){if(0==i.values.length)l(e);else{var n=i.values.splice(i.values.length-1,1);o(e,n[0].items)}}),i.list.off("change").on("change",function(s){var r=t(s.target).val(),c=n(i.items,"value",r);if(i.values.push({item:c,items:i.items}),c&&c.items)o(e,c.items);else{var u=i.values.map(function(t,e){return t.item.text}).join(i.options.split),d=i.values.map(function(t,e){return t.item.value}).join(i.options.split);t(e).val(u).attr("data-values",d),l(e)}a.onChange&&a.onChange.call(e,r)})}function n(t,e,i){for(var n=0;n<t.length;n++){var a=t[n];if(a[e]==i)return a}return null}function a(e){var i=t(e).data("select"),n=i.options;n.items=n.items.map(function(t,e){return"string"==typeof t?{text:t,value:t}:t}),o(e,n.items)}function o(e,i){var n=t(e).data("select"),a=(n.options,template.compile(c));n.items=i,n.list.html(a(n))}function s(e){var i=t(e).data("select"),n=i.options;i.values=[],o(e,n.items),i.panel.addClass("select_toggle")}function l(e){var i=t(e).data("select");i.panel.removeClass("select_toggle")}t.fn.select=function(n,o){return"string"==typeof n?t.fn.select.methods[n](this,o):(n=n||{},this.each(function(){var o,s=t(this).data("select");s?o=t.extend(s.options,n):(o=t.extend({},t.fn.select.defaults,n),t(this).data("select",{options:o}),e(this)),a(this),i(this)}))},t.fn.select.methods={open:function(t){return t.each(function(){s(this)})},close:function(t){return t.each(function(){l(this)})}},t.fn.select.defaults={items:[],title:"请选择",closeText:"关闭",onChange:null,onClose:null,onOpen:null,split:" "};var r='<div class="select"> <div class="toolbar"> <div class="toolbar__left"> <a href="javascript:;" class="toolbar__btn toolbar__back-btn"><i class="icon-back_bar"></i></a> </div> <div class="toolbar__center"> <div class="toolbar__title">{{title}}</div> </div> <div class="toolbar__right"> <a href="javascript:;" class="toolbar__btn toolbar__close-btn">{{closeText}}</a> </div> </div> <div class="select__content"></div> </div>',c='<div class="weui-cells weui-cells_radio"> {{each items as item i}} <label class="weui-cell weui-check__label"> <div class="weui-cell__bd"> <p>{{item.text}}</p> </div> <div class="weui-cell__ft"> <input type="radio" class="weui-check" name="select" value="{{item.value}}"> <span class="weui-icon-checked"></span> </div> </label> {{/each}} </div>'}($),function(t){function e(e,i){var a=t(e).data("select2"),o=a.options,s=template.compile(n);a.items=i,t(e).html(s(a)),o.onLoadSuccess.call(e,i)}function i(i,n,a){var o=t(i).data("select2").options;n&&(o.url=n),o.url&&(a=a||{},0!=o.onBeforeLoad.call(i,a)&&t.ajax({type:o.method,url:o.url,data:t.toJSON(a),contentType:"application/json",dataType:"json",success:function(t){e(i,t.rows)},error:function(){o.onLoadError.apply(this,arguments)}}))}t.fn.select2=function(n,a){return"string"==typeof n?t.fn.select2.methods[n](this,a):(n=n||{},this.each(function(){var a,o=t(this).data("select2");o?a=t.extend(o.options,n):(a=t.extend({},t.fn.select2.defaults,n),o=t(this).data("select2",{options:a,items:[]})),a.items&&e(this,a.items),i(this)}))},t.fn.select2.methods={loadData:function(t,i){return t.each(function(){e(this,i)})},reload:function(t,e){return t.each(function(){i(this,e)})}},t.fn.select2.defaults={valueField:"value",textField:"text",method:"post",url:null,items:null,onBeforeLoad:function(t){},onLoadSuccess:function(){},onLoadError:function(){}};var n='{{each items as item i}} <option value="{{item.value}}">{{item.text}}</option> {{/each}}'}($),function(t){function e(e){t(e).on("click",".weui-tabbar__item",function(){t(this).addClass("weui-bar__item_on").siblings(".weui-bar__item_on").removeClass("weui-bar__item_on")})}t.fn.tabbar=function(){return this.each(function(){e(this)})}}($),function(t){function e(e){e=e||{};var s=t.extend({},t.toast.defaults,e),l=template.compile(o);i(s),n=t(l(s)).appendTo("body"),0!=s.duration&&(a=setTimeout(function(){i(s)},s.duration))}function i(t){a&&(clearTimeout(a),a=null),n&&(n.remove(),n=null,t&&t.callback&&t.callback(this))}var n,a;t.toast=function(e,i){if("string"==typeof e)return t.toast.methods[e](i)},t.toast.methods={show:function(t){"string"==typeof t&&(t={msg:t}),e(t)},showLoading:function(i){e(t.extend({duration:0,msg:"数据加载中",iconCls:"weui-loading"},i))},hideLoading:function(t){i()}},t.toast.defaults={duration:2e3,msg:"操作成功",iconCls:null,callback:null};var o='<div style="display: block;"> <div class="weui-mask_transparent"></div> <div class="weui-toast {{if !iconCls}}toast_plain{{/if}}"> {{if iconCls}} <i class="weui-icon_toast {{iconCls}}"></i> {{/if}} <p class="weui-toast__content">{{msg}}</p> </div> </div>'}($),function(t){function e(e){e=e||{};var o=t.extend({},t.toptip.defaults,e),s=template.compile(a);n&&i(o),n=t(s(o)).appendTo("body"),setTimeout(function(){i(o)},o.duration)}function i(t){n&&(n.remove(),n=null,t&&t.callback&&t.callback(this))}var n;t.toptip=function(e,i){if("string"==typeof e)return t.toptip.methods[e](i)},t.toptip.methods={show:function(t){"string"==typeof t&&(t={msg:t}),e(t)}},t.toptip.defaults={duration:2e3,msg:"操作成功",callback:null};var a='<div class="weui-toptips weui-toptips_warn" style="display: block;">{{msg}}</div>'}($),function($){function init(t){$(t).addClass("validate-text")}function showTip(t){if(t){var e=$(t).data("validate");$.toptip("show",{msg:e.message})}}function validate(target){function setTipMessage(t){state.message=t.replace(new RegExp("\\{title\\}","g"),opts.title)}function validateRule(validType){var result=/([a-zA-Z_]+)(.*)/.exec(validType),rule=opts.rules[result[1]];if(value&&rule){var param=eval(result[2]);if(!rule.validator.call(target,value,param)){var message=rule.message;if(param)for(var i=0;i<param.length;i++)message=message.replace(new RegExp("\\{"+i+"\\}","g"),param[i]);return setTipMessage(opts.invalidMessage||message),t.addClass("validate-invalid"),!1}}return!0}var state=$(target).data("validate"),opts=state.options,t=$(target),value=t.val();if(opts.required&&(""===value||null===value))return setTipMessage(opts.missingMessage),t.addClass("validate-invalid"),!1;if(opts.validType)if($.isArray(opts.validType)){for(var i=0;i<opts.validType.length;i++)if(!validateRule(opts.validType[i]))return!1}else if(!validateRule(opts.validType))return!1;return t.removeClass("validate-invalid"),!0}$.fn.validate=function(t,e){return"string"==typeof t?$.fn.validate.methods[t](this,e):(t=t||{},this.each(function(){var e=$(this).data("validate");e?$.extend(e.options,t):$(this).data("validate",{options:$.extend({},$.fn.validate.defaults,$.fn.validate.parseOptions(this),t)}),init(this)}))},$.fn.validate.methods={options:function(t){return t.data("validate").options},validate:function(t){return t.each(function(){validate(this)})},isValid:function(t){return validate(t[0])},showTip:function(t){return showTip(t[0])}},$.fn.validate.parseOptions=function(t){return $.parser.parseOptions(t,["title","required"])},$.fn.validate.defaults={title:null,required:!1,validType:null,missingMessage:"{title}为必输项",invalidMessage:null,rules:{length:{validator:function(t,e){var i=$.trim(t).length;return i>=e[0]&&i<=e[1]},message:"{title}输入内容长度必须介于{0}和{1}之间"}}}}($);
=======
!function(t){function e(e){var i=template.compile(o),n=e.actions||[];isAdnroid=e.android,t.closeActionsheet(),a=t(i(e)).appendTo("body").data("actionsheet",{options:e}),a.find(".weui-actionsheet__menu .weui-actionsheet__cell, .weui-actionsheet__action .weui-actionsheet__cell").each(function(i,a){t(a).click(function(){t.closeActionsheet(),e.onClose&&e.onClose(),n[i]&&n[i].onClick&&n[i].onClick()})}),a.children(".weui-mask").fadeIn(200).on("click",function(){t.closeActionsheet()}),a.children(".weui-actionsheet").addClass("weui-actionsheet_toggle")}function i(){a&&a.remove(),a=null}function n(){if(a){var t=a.data("actionsheet").options;a.children(".weui-mask").fadeOut(200),t.android?a.children(".weui-actionsheet").fadeOut(200,i):a.children(".weui-actionsheet").removeClass("weui-actionsheet_toggle").on("transitionend webkitTransitionEnd",i)}}var a;t.actionsheet=function(i){i=t.extend({},t.actionsheet.defaults,i),e(i)},t.closeActionsheet=function(){n()},t.actionsheet.defaults={android:!1,actions:[],onClose:void 0};var o='<div class="{{if android}}weui-skin_android{{/if}}"> <div class="weui-mask actionsheet__mask"></div> <div class="weui-actionsheet weui-actionsheet_toggle"> <div class="weui-actionsheet__menu"> {{each actions as action i}} <div class="weui-actionsheet__cell {{if action.className}}{{action.className}}{{/if}}">{{action.text}}</div> {{/each}} </div> <div class="weui-actionsheet__action"> <div class="weui-actionsheet__cell">取消</div> </div> </div> </div>'}($),function(t){function e(){i&&i.remove(),i=null}var i;t.dialog={show:function(n){var a=t.extend({},t.dialog.defaults,n),o=template.compile(a.dialogTempalte);return e(),i=t(o(a)).appendTo("body"),i.find(".weui-dialog__btn").each(function(i,n){t(n).click(function(){e(),a.buttons[i].onClick&&a.buttons[i].onClick()})}),i},alert:function(e,i,n){return t.dialog.show({title:e,msg:i,buttons:[{text:t.dialog.defaults.buttonOK,btnCls:"primary",onClick:n}]})},confirm:function(e,i,n){return t.dialog.show({title:e,msg:i,buttons:[{text:t.dialog.defaults.buttonCancel,btnCls:"default",onClick:function(){n(!1)}},{text:t.dialog.defaults.buttonOK,btnCls:"primary",onClick:function(){n(!0)}}]})}},t.dialog.defaults={title:null,msg:null,buttonOK:"确定",buttonCancel:"取消",buttons:[{text:"确定",btnCls:"primary"}],dialogTempalte:'<div class="dialog"> <div class="weui-mask"></div> <div class="weui-dialog"> <div class="weui-dialog__hd"><strong class="weui-dialog__title">{{title}}</strong></div> <div class="weui-dialog__bd">{{msg}}</div> <div class="weui-dialog__ft"> {{each buttons as button i}} <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_{{button.btnCls}}">{{button.text}}</a> {{/each}} </div> </div> </div>'}}($),function(t){function e(e,i){function n(i){var n=t(e);for(var o in i){var s=i[o];a(o,s)||(n.find('input[name="'+o+'"]').val(s),n.find('textarea[name="'+o+'"]').val(s),n.find('select[name="'+o+'"]').val(s))}}function a(i,n){var a=t(e).find('input[name="'+i+'"][type=radio], input[name="'+i+'"][type=checkbox]');return!!a.length&&(a.each(function(){o(t(this).val(),n)&&t(this).prop("checked",!0)}),!0)}function o(e,i){return e==String(i)||t.inArray(e,t.isArray(i)?i:[i])>=0}"string"==typeof i?t.ajax({url:i,dataType:"json",success:function(t){n(t)}}):n(i)}function i(e){t("input,select,textarea",e).each(function(){var t=this.type,e=this.tagName.toLowerCase();"text"==t||"password"==t||"textarea"==e?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==e&&(this.selectedIndex=-1)})}function n(t){t.reset()}function a(e){if(t.fn.validate){var i=t(e);i.find(".validate-text:not(:disabled)").validate("validate");var n=i.find(".validate-invalid");n.filter(":not(:disabled)").first().focus().validate("showTip");return 0==n.length}return!0}t.fn.form=function(e,i){if("string"==typeof e)return t.fn.form.methods[e](this,i)},t.fn.form.methods={load:function(t,i){return t.each(function(){e(this,i)})},clear:function(t){return t.each(function(){i(this)})},reset:function(t){return t.each(function(){n(this)})},validate:function(t){return a(t[0])}}}($),function(t){function e(e){var i=e,n=template.compile(o);t.gallery("close"),a=t(n(i)).appendTo("body").data("gallery",{options:i}),a.on("click",".gallery__back-btn",function(){t.gallery("close")}).on("click",".gallery__delete-btn",function(){t.dialog.confirm("提示","是否删除当前内容?",function(e){e&&(t.gallery("close"),i.onDelete&&i.onDelete())})})}function i(){a&&a.remove(),a=null}function n(){a&&a.fadeOut(200,i)}var a;t.gallery=function(i,n){return"string"==typeof i?t.gallery.methods[i](n):(i=t.extend({},t.gallery.defaults,i),void e(i))},t.gallery.methods={close:function(t){n()}},t.gallery.defaults={deletable:!0,imageUrl:null,onDelete:void 0};var o='<div class="weui-gallery" style="display: block"> <span class="weui-gallery__img" style="background-image: url({{imageUrl}});"></span> <div class="weui-gallery__opr"> <a href="javascript:" class="gallery__back-btn" style="display: inline-block;"> <i class="icon-back_gallery"></i> </a> {{if deletable}} &nbsp; <a href="javascript:" class="gallery__delete-btn" style="display: inline-block;"> <i class="weui-icon-delete weui-icon_gallery-delete"></i> </a> {{/if}} </div> </div>'}($),function(t){function e(e,i){var n=t(e),a=n.data("infinite").options;n[i?"off":"on"]("scroll",function(){var t=n[0].scrollHeight-(n.height()+n.scrollTop());t<=a.distance&&n.trigger("infinite")})}t.fn.infinite=function(i,n){return"string"==typeof i?t.fn.infinite.methods[i](this,n):(i=i||{},this.each(function(){var n=t(this).data("infinite");n?t.extend(n.options,i):(t(this).data("infinite",{options:t.extend({},t.fn.infinite.defaults,i)}),e(this))}))},t.fn.infinite.methods={destroy:function(t){return t.each(function(){e(this,!0)})}},t.fn.infinite.defaults={distance:50}}($),function(t){function e(e,i){var n=t(e).data("pagination"),o=n.options,s=Math.ceil(n.data.total/o.pageSize);i>s&&(i=s),i<1&&(i=1),a(e),o.pageNumber=i}function i(i){var n=t(i).data("pagination"),a=n.options,o=Math.ceil(n.data.total/a.pageSize);a.pageNumber<o&&e(i,a.pageNumber+1)}function n(e,i){var n=t(e).data("pagination"),a=n.options;t.isArray(i)?i={rows:i,total:i.length}:i.total=parseInt(i.total||i.rows.length),n.data=i,a.onLoadSuccess&&a.onLoadSuccess.call(e,i)}function a(e){var i=t(e).data("pagination"),a=i.options;if(!a.url)return!1;var o=t.extend({},a.queryParams);t.extend(o,{page:a.pageNumber,rows:a.pageSize}),t.toast("showLoading"),t.ajax({type:a.method,url:a.url,data:t.toJSON(o),contentType:"application/json",dataType:"json",success:function(i){t.toast("hideLoading"),0==i.errcode?n(e,i):a.onLoadError&&a.onLoadError.call(e)},error:function(){t.toast("hideLoading"),a.onLoadError&&a.onLoadError.call(e)}})}t.fn.pagination=function(i,n){return"string"==typeof i?t.fn.pagination.methods[i](this,n):(i=i||{},this.each(function(){var n,a=t(this).data("pagination");a?n=t.extend(a.options,i):(n=t.extend({},t.fn.pagination.defaults,i),t(this).data("pagination",{options:n,data:{total:0,rows:[]}})),e(this,n.pageNumber)}))},t.fn.pagination.methods={select:function(t,i){return t.each(function(){e(this,i)})},next:function(t){return t.each(function(){i(this)})}},t.fn.pagination.defaults={method:"post",url:null,pageSize:20,pageNumber:1,queryParams:{},onLoadSuccess:function(t){},onLoadError:function(){}}}($),function(t){t.parser={parseOptions:function(e,i){var n=t(e),a={},o=t.trim(n.attr("data-options"));if(o&&("{"!=o.substring(0,1)&&(o="{"+o+"}"),a=new Function("return "+o)()),i){for(var s={},l=0;l<i.length;l++){var r=i[l];if("string"==typeof r)"width"==r||"height"==r||"left"==r||"top"==r?s[r]=parseInt(e.style[r])||void 0:s[r]=n.attr(r);else for(var c in r){var u=r[c];"boolean"==u?s[c]=n.attr(c)?"true"==n.attr(c):void 0:"number"==u&&(s[c]="0"==n.attr(c)?0:parseFloat(n.attr(c))||void 0)}}t.extend(a,s)}return a}}}($),function(t){function e(e){t(e).addClass("popup_toggle")}function i(e){t(e).removeClass("popup_toggle")}t.fn.popup=function(e,i){if("string"==typeof e)return t.fn.popup.methods[e](this,i)},t.fn.popup.methods={open:function(t){return t.each(function(){e(this)})},close:function(t){return t.each(function(){i(this)})}}}($),function(t){function e(e){var i=t(e),n=i.data("pull-to-refresh").options,o=template.compile(a);i.addClass("weui-pull-to-refresh").prepend(o(n))}function i(e){function i(t){return t>0&&0==r.scrollTop()?"down":t<0&&r[0].scrollHeight-r.height()-r.scrollTop()==0?"up":null}function n(t){r.hasClass("weui-pull-refreshing")||(s={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY},l=0)}function a(t){if(!r.hasClass("weui-pull-refreshing")){if(!s)return!1;var e={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY};l=e.y-s.y;var n=i(l);"down"==n&&(l=Math.pow(l,.8),r.css("transform","translate3d(0, "+l+"px, 0)"),r.removeClass("weui-pull-down weui-pull-refresh"),l<c.distance?r.addClass("weui-pull-down"):r.removeClass("weui-pull-down").addClass("weui-pull-refresh"))}}function o(t){if(s=!1,!r.hasClass("weui-pull-refreshing")){var e=i(l);"down"==e&&(r.removeClass("weui-pull-down weui-pull-refresh"),r.css("transform",""),l<=c.distance||(r.addClass("weui-pull-refreshing"),r.trigger("pull-to-refresh")))}}var s,l,r=t(e),c=r.data("pull-to-refresh").options;r.on("touchstart",n),r.on("touchmove",a),r.on("touchend",o)}function n(e){t(e).removeClass("weui-pull-refreshing")}t.fn.pullToRefresh=function(n,a){return"string"==typeof n?t.fn.pullToRefresh.methods[n](this,a):(n=n||{},this.each(function(){var a=t(this).data("pull-to-refresh");a?t.extend(a.options,n):(t(this).data("pull-to-refresh",{options:t.extend({},t.fn.pullToRefresh.defaults,n)}),e(this),i(this))}))},t.fn.pullToRefresh.methods={options:function(e){return t.data(e[0],"pull-to-refresh").options},done:function(t){return t.each(function(){n(this)})}},t.fn.pullToRefresh.defaults={distance:50};var a='<div class="weui-pull-to-refresh-layer"> <div class="weui-pull-down-inner"><i class="iconfont icon-down"></i>下拉刷新</div> <div class="weui-pull-refresh-inner"><i class="iconfont icon-refresh"></i>释放刷新</div> <div class="weui-pull-refreshing-inner"><i class="iconfont icon-refresh"></i>正在刷新</div> </div>'}($),function(t){function e(e){var i=t(e).data("searchbar"),n=i.options,a=t(e).find("form.weui-search-bar__form");a.off("submit").on("submit",function(t){t.preventDefault(),n.onSearch&&n.onSearch.call(this)}),t(e).off("click").on("click",".search-bar__search-btn",function(t){a.trigger("submit")})}t.fn.searchbar=function(i,n){return i=i||{},this.each(function(){var n=t(this).data("searchbar");n?t.extend(n.options,i):t(this).data("searchbar",{options:t.extend({},t.fn.searchbar.defaults,i)}),e(this)})},t.fn.searchbar.defaults={onSearch:null}}($),function(t){function e(e){var i=t(e).data("select"),n=(i.options,template.compile(r));i.panel=t(n(i.options)).appendTo("body"),i.toolbar=i.panel.children("div.toolbar"),i.list=i.panel.children("div.select__content")}function i(e){var i=t(e).data("select"),a=i.options;t(e).off("click").on("click",function(t){s(e)}),i.toolbar.off("click").on("click",".toolbar__close-btn",function(t){l(e)}).on("click",".toolbar__back-btn",function(t){if(0==i.values.length)l(e);else{var n=i.values.splice(i.values.length-1,1);o(e,n[0].items)}}),i.list.off("change").on("change",function(s){var r=t(s.target).val(),c=n(i.items,"value",r);if(i.values.push({item:c,items:i.items}),c&&c.items)o(e,c.items);else{var u=i.values.map(function(t,e){return t.item.text}).join(i.options.split),d=i.values.map(function(t,e){return t.item.value}).join(i.options.split);t(e).val(u).attr("data-values",d),l(e)}a.onChange&&a.onChange.apply(e,r)})}function n(t,e,i){for(var n=0;n<t.length;n++){var a=t[n];if(a[e]==i)return a}return null}function a(e){var i=t(e).data("select"),n=i.options;n.items=n.items.map(function(t,e){return"string"==typeof t?{text:t,value:t}:t}),o(e,n.items)}function o(e,i){var n=t(e).data("select"),a=(n.options,template.compile(c));n.items=i,n.list.html(a(n))}function s(e){var i=t(e).data("select"),n=i.options;i.values=[],o(e,n.items),i.panel.addClass("select_toggle")}function l(e){var i=t(e).data("select");i.panel.removeClass("select_toggle")}t.fn.select=function(n,o){return"string"==typeof n?t.fn.select.methods[n](this,o):(n=n||{},this.each(function(){var o,s=t(this).data("select");s?o=t.extend(s.options,n):(o=t.extend({},t.fn.select.defaults,n),t(this).data("select",{options:o}),e(this)),a(this),i(this)}))},t.fn.select.methods={open:function(t){return t.each(function(){s(this)})},close:function(t){return t.each(function(){l(this)})}},t.fn.select.defaults={items:[],title:"请选择",closeText:"关闭",onChange:null,onClose:null,onOpen:null,split:" "};var r='<div class="select"> <div class="toolbar"> <div class="toolbar__left"> <a href="javascript:;" class="toolbar__btn toolbar__back-btn"><i class="icon-back_bar"></i></a> </div> <div class="toolbar__center"> <div class="toolbar__title">{{title}}</div> </div> <div class="toolbar__right"> <a href="javascript:;" class="toolbar__btn toolbar__close-btn">{{closeText}}</a> </div> </div> <div class="select__content"></div> </div>',c='<div class="weui-cells weui-cells_radio"> {{each items as item i}} <label class="weui-cell weui-check__label"> <div class="weui-cell__bd"> <p>{{item.text}}</p> </div> <div class="weui-cell__ft"> <input type="radio" class="weui-check" name="select" value="{{item.value}}"> <span class="weui-icon-checked"></span> </div> </label> {{/each}} </div>'}($),function(t){function e(e,i){var a=t(e).data("select2"),o=a.options,s=template.compile(n);a.items=i,t(e).html(s(a)),o.onLoadSuccess.call(e,i)}function i(i,n,a){var o=t(i).data("select2").options;n&&(o.url=n),o.url&&(a=a||{},0!=o.onBeforeLoad.call(i,a)&&t.ajax({type:o.method,url:o.url,data:t.toJSON(a),contentType:"application/json",dataType:"json",success:function(t){e(i,t.rows)},error:function(){o.onLoadError.apply(this,arguments)}}))}t.fn.select2=function(n,a){return"string"==typeof n?t.fn.select2.methods[n](this,a):(n=n||{},this.each(function(){var a,o=t(this).data("select2");o?a=t.extend(o.options,n):(a=t.extend({},t.fn.select2.defaults,n),o=t(this).data("select2",{options:a,items:[]})),a.items&&e(this,a.items),i(this)}))},t.fn.select2.methods={loadData:function(t,i){return t.each(function(){e(this,i)})},reload:function(t,e){return t.each(function(){i(this,e)})}},t.fn.select2.defaults={valueField:"value",textField:"text",method:"post",url:null,items:null,onBeforeLoad:function(t){},onLoadSuccess:function(){},onLoadError:function(){}};var n='{{each items as item i}} <option value="{{item.value}}">{{item.text}}</option> {{/each}}'}($),function(t){function e(e){t(e).on("click",".weui-tabbar__item",function(){t(this).addClass("weui-bar__item_on").siblings(".weui-bar__item_on").removeClass("weui-bar__item_on")})}t.fn.tabbar=function(){return this.each(function(){e(this)})}}($),function(t){function e(e){e=e||{};var s=t.extend({},t.toast.defaults,e),l=template.compile(o);i(s),n=t(l(s)).appendTo("body"),0!=s.duration&&(a=setTimeout(function(){i(s)},s.duration))}function i(t){a&&(clearTimeout(a),a=null),n&&(n.remove(),n=null,t&&t.callback&&t.callback(this))}var n,a;t.toast=function(e,i){if("string"==typeof e)return t.toast.methods[e](i)},t.toast.methods={show:function(t){"string"==typeof t&&(t={msg:t}),e(t)},showLoading:function(i){e(t.extend({duration:0,msg:"数据加载中",iconCls:"weui-loading"},i))},hideLoading:function(t){i()}},t.toast.defaults={duration:2e3,msg:"操作成功",iconCls:null,callback:null};var o='<div style="display: block;"> <div class="weui-mask_transparent"></div> <div class="weui-toast {{if !iconCls}}toast_plain{{/if}}"> {{if iconCls}} <i class="weui-icon_toast {{iconCls}}"></i> {{/if}} <p class="weui-toast__content">{{msg}}</p> </div> </div>'}($),function(t){function e(e){e=e||{};var o=t.extend({},t.toptip.defaults,e),s=template.compile(a);n&&i(o),n=t(s(o)).appendTo("body"),setTimeout(function(){i(o)},o.duration)}function i(t){n&&(n.remove(),n=null,t&&t.callback&&t.callback(this))}var n;t.toptip=function(e,i){if("string"==typeof e)return t.toptip.methods[e](i)},t.toptip.methods={show:function(t){"string"==typeof t&&(t={msg:t}),e(t)}},t.toptip.defaults={duration:2e3,msg:"操作成功",callback:null};var a='<div class="weui-toptips weui-toptips_warn" style="display: block;">{{msg}}</div>'}($),function($){function init(t){$(t).addClass("validate-text")}function showTip(t){if(t){var e=$(t).data("validate");$.toptip("show",{msg:e.message})}}function validate(target){function setTipMessage(t){state.message=t.replace(new RegExp("\\{title\\}","g"),opts.title)}function validateRule(validType){var result=/([a-zA-Z_]+)(.*)/.exec(validType),rule=opts.rules[result[1]];if(value&&rule){var param=eval(result[2]);if(!rule.validator.call(target,value,param)){var message=rule.message;if(param)for(var i=0;i<param.length;i++)message=message.replace(new RegExp("\\{"+i+"\\}","g"),param[i]);return setTipMessage(opts.invalidMessage||message),t.addClass("validate-invalid"),!1}}return!0}var state=$(target).data("validate"),opts=state.options,t=$(target),value=t.val();if(opts.required&&(""===value||null===value))return setTipMessage(opts.missingMessage),t.addClass("validate-invalid"),!1;if(opts.validType)if($.isArray(opts.validType)){for(var i=0;i<opts.validType.length;i++)if(!validateRule(opts.validType[i]))return!1}else if(!validateRule(opts.validType))return!1;return t.removeClass("validate-invalid"),!0}$.fn.validate=function(t,e){return"string"==typeof t?$.fn.validate.methods[t](this,e):(t=t||{},this.each(function(){var e=$(this).data("validate");e?$.extend(e.options,t):$(this).data("validate",{options:$.extend({},$.fn.validate.defaults,$.fn.validate.parseOptions(this),t)}),init(this)}))},$.fn.validate.methods={options:function(t){return t.data("validate").options},validate:function(t){return t.each(function(){validate(this)})},isValid:function(t){return validate(t[0])},showTip:function(t){return showTip(t[0])}},$.fn.validate.parseOptions=function(t){return $.parser.parseOptions(t,["title","required"])},$.fn.validate.defaults={title:null,required:!1,validType:null,missingMessage:"{title}为必输项",invalidMessage:null,rules:{length:{validator:function(t,e){var i=$.trim(t).length;return i>=e[0]&&i<=e[1]},message:"{title}输入内容长度必须介于{0}和{1}之间"}}}}($);
>>>>>>> d8120fa9269baca94c51a63a495674c260d444e4
