!function(t){function e(e){i=t('<div class="weui-mask_transparent actionsheet__mask"></div>').appendTo(document.body);var n=e.actions||[],o=n.map(function(t,e){return'<div class="weui-actionsheet__cell '+(t.className||"")+'">'+t.text+"</div>"}).join(""),s='<div class="weui-actionsheet" id="weui-actionsheet"><div class="weui-actionsheet__menu">'+o+'</div><div class="weui-actionsheet__action"><div class="weui-actionsheet__cell">取消</div></div></div>';a=t(s).appendTo(document.body),a.find(".weui-actionsheet__menu .weui-actionsheet__cell, .weui-actionsheet__action .weui-actionsheet__cell").each(function(i,a){t(a).click(function(){t.closeActionsheet(),e.onClose&&e.onClose(),n[i]&&n[i].onClick&&n[i].onClick()})}),i.show().addClass("actionsheet__mask_show"),a.show().addClass("weui-actionsheet_toggle")}function n(){i.removeClass("actionsheet__mask_show"),a.removeClass("weui-actionsheet_toggle").on("transitionend webkitTransitionEnd",function(){i&&i.remove(),a&&a.remove(),i=null,a=null})}var i,a;t.actionsheet=function(n){n=t.extend({},t.actionsheet.defaults,n),e(n)},t.closeActionsheet=function(){n()},t(document).on("click",".actionsheet__mask",function(){t.closeActionsheet()}),t.actionsheet.defaults={onClose:void 0}}($),function(t){function e(){n&&n.remove(),n=null}var n;t.messager={show:function(i){var a=t.extend({},t.messager.defaults,i),o=template.compile(a.dialogTempalte);return e(),n=t(o(a)).appendTo("body"),n.find(".weui-dialog__btn").each(function(n,i){t(i).click(function(){e(),a.buttons[n].onClick&&a.buttons[n].onClick()})}),n},alert:function(e,n,i){return t.messager.show({title:e,msg:n,buttons:[{text:t.messager.defaults.buttonOK,btnCls:"primary",onClick:i}]})},confirm:function(e,n,i){return t.messager.show({title:e,msg:n,buttons:[{text:t.messager.defaults.buttonCancel,btnCls:"default",onClick:function(){i(!1)}},{text:t.messager.defaults.buttonOK,btnCls:"primary",onClick:function(){i(!0)}}]})}},t.messager.defaults={title:null,msg:null,buttonOK:"确定",buttonCancel:"取消",buttons:[{text:"确定",btnCls:"primary"}],dialogTempalte:'<div class="dialog"> <div class="weui-mask"></div> <div class="weui-dialog"> <div class="weui-dialog__hd"><strong class="weui-dialog__title">{{title}}</strong></div> <div class="weui-dialog__bd">{{msg}}</div> <div class="weui-dialog__ft"> {{each buttons as button i}} <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_{{button.btnCls}}">{{button.text}}</a> {{/each}} </div> </div> </div>'}}($),function(t){function e(e,n){function i(n){var i=t(e);for(var o in n){var s=n[o];a(o,s)||(i.find('input[name="'+o+'"]').val(s),i.find('textarea[name="'+o+'"]').val(s),i.find('select[name="'+o+'"]').val(s))}}function a(n,i){var a=t(e).find('input[name="'+n+'"][type=radio], input[name="'+n+'"][type=checkbox]');return!!a.length&&(a.each(function(){o(t(this).val(),i)&&t(this).prop("checked",!0)}),!0)}function o(e,n){return e==String(n)||t.inArray(e,t.isArray(n)?n:[n])>=0}"string"==typeof n?t.ajax({url:n,dataType:"json",success:function(t){i(t)}}):i(n)}function n(e){t("input,select,textarea",e).each(function(){var t=this.type,e=this.tagName.toLowerCase();"text"==t||"password"==t||"textarea"==e?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==e&&(this.selectedIndex=-1)})}function i(t){t.reset()}function a(e){if(t.fn.validate){var n=t(e);n.find(".validate-text:not(:disabled)").validate("validate");var i=n.find(".validate-invalid");i.filter(":not(:disabled)").first().focus().validate("showTip");return 0==i.length}return!0}t.fn.form=function(e,n){if("string"==typeof e)return t.fn.form.methods[e](this,n)},t.fn.form.methods={load:function(t,n){return t.each(function(){e(this,n)})},clear:function(t){return t.each(function(){n(this)})},reset:function(t){return t.each(function(){i(this)})},validate:function(t){return a(t[0])}}}($),function(t){function e(e,n){var i=t(e),a=i.data("infinite").options;i[n?"off":"on"]("scroll",function(){var t=i[0].scrollHeight-(i.height()+i.scrollTop());t<=a.distance&&i.trigger("infinite")})}t.fn.infinite=function(n,i){return"string"==typeof n?t.fn.infinite.methods[n](this,i):(n=n||{},this.each(function(){var i=t(this).data("infinite");i?t.extend(i.options,n):(t(this).data("infinite",{options:t.extend({},t.fn.infinite.defaults,n)}),e(this))}))},t.fn.infinite.methods={destroy:function(t){return t.each(function(){e(this,!0)})}},t.fn.infinite.defaults={distance:50}}($),function(t){function e(e,n){var i=t(e).data("pagination"),o=i.options,s=Math.ceil(i.data.total/o.pageSize);n>s&&(n=s),n<1&&(n=1),a(e),o.pageNumber=n}function n(n){var i=t(n).data("pagination"),a=i.options,o=Math.ceil(i.data.total/a.pageSize);a.pageNumber<o&&e(n,a.pageNumber+1)}function i(e,n){var i=t(e).data("pagination"),a=i.options;t.isArray(n)?n={rows:n,total:n.length}:n.total=parseInt(n.total||n.rows.length),i.data=n,a.onLoadSuccess&&a.onLoadSuccess.call(e,n)}function a(e){var n=t(e).data("pagination"),a=n.options;if(!a.url)return!1;var o=t.extend({},a.queryParams);t.extend(o,{page:a.pageNumber,rows:a.pageSize}),t.toast("showLoading"),t.ajax({type:a.method,url:a.url,data:t.toJSON(o),contentType:"application/json",dataType:"json",success:function(n){t.toast("hideLoading"),0==n.errcode?i(e,n):a.onLoadError&&a.onLoadError.call(e)},error:function(){t.toast("hideLoading"),a.onLoadError&&a.onLoadError.call(e)}})}t.fn.pagination=function(n,i){return"string"==typeof n?t.fn.pagination.methods[n](this,i):(n=n||{},this.each(function(){var i,a=t(this).data("pagination");a?i=t.extend(a.options,n):(i=t.extend({},t.fn.pagination.defaults,n),t(this).data("pagination",{options:i,data:{total:0,rows:[]}})),e(this,i.pageNumber)}))},t.fn.pagination.methods={select:function(t,n){return t.each(function(){e(this,n)})},next:function(t){return t.each(function(){n(this)})}},t.fn.pagination.defaults={method:"post",url:null,pageSize:20,pageNumber:1,queryParams:{},onLoadSuccess:function(t){},onLoadError:function(){}}}($),function(t){t.parser={parseOptions:function(e,n){var i=t(e),a={},o=t.trim(i.attr("data-options"));if(o&&("{"!=o.substring(0,1)&&(o="{"+o+"}"),a=new Function("return "+o)()),n){for(var s={},l=0;l<n.length;l++){var r=n[l];if("string"==typeof r)"width"==r||"height"==r||"left"==r||"top"==r?s[r]=parseInt(e.style[r])||void 0:s[r]=i.attr(r);else for(var c in r){var u=r[c];"boolean"==u?s[c]=i.attr(c)?"true"==i.attr(c):void 0:"number"==u&&(s[c]="0"==i.attr(c)?0:parseFloat(i.attr(c))||void 0)}}t.extend(a,s)}return a}}}($),function(t){function e(e){t(e).addClass("popup_toggle")}function n(e){t(e).removeClass("popup_toggle")}t.fn.popup=function(e,n){if("string"==typeof e)return t.fn.popup.methods[e](this,n)},t.fn.popup.methods={open:function(t){return t.each(function(){e(this)})},close:function(t){return t.each(function(){n(this)})}}}($),function(t){function e(e){var n=t(e),i=n.data("pull-to-refresh").options,o=template.compile(a);n.addClass("weui-pull-to-refresh").prepend(o(i))}function n(e){function n(t){return t>0&&0==r.scrollTop()?"down":t<0&&r[0].scrollHeight-r.height()-r.scrollTop()==0?"up":null}function i(t){r.hasClass("weui-pull-refreshing")||(s={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY},l=0)}function a(t){if(!r.hasClass("weui-pull-refreshing")){if(!s)return!1;var e={x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY};l=e.y-s.y;var i=n(l);"down"==i&&(l=Math.pow(l,.8),r.css("transform","translate3d(0, "+l+"px, 0)"),r.removeClass("weui-pull-down weui-pull-refresh"),l<c.distance?r.addClass("weui-pull-down"):r.removeClass("weui-pull-down").addClass("weui-pull-refresh"))}}function o(t){if(s=!1,!r.hasClass("weui-pull-refreshing")){var e=n(l);"down"==e&&(r.removeClass("weui-pull-down weui-pull-refresh"),r.css("transform",""),l<=c.distance||(r.addClass("weui-pull-refreshing"),r.trigger("pull-to-refresh")))}}var s,l,r=t(e),c=r.data("pull-to-refresh").options;r.on("touchstart",i),r.on("touchmove",a),r.on("touchend",o)}function i(e){t(e).removeClass("weui-pull-refreshing")}t.fn.pullToRefresh=function(i,a){return"string"==typeof i?t.fn.pullToRefresh.methods[i](this,a):(i=i||{},this.each(function(){var a=t(this).data("pull-to-refresh");a?t.extend(a.options,i):(t(this).data("pull-to-refresh",{options:t.extend({},t.fn.pullToRefresh.defaults,i)}),e(this),n(this))}))},t.fn.pullToRefresh.methods={options:function(e){return t.data(e[0],"pull-to-refresh").options},done:function(t){return t.each(function(){i(this)})}},t.fn.pullToRefresh.defaults={distance:50};var a='<div class="weui-pull-to-refresh-layer"> <div class="weui-pull-down-inner"><i class="iconfont icon-down"></i>下拉刷新</div> <div class="weui-pull-refresh-inner"><i class="iconfont icon-refresh"></i>释放刷新</div> <div class="weui-pull-refreshing-inner"><i class="iconfont icon-refresh"></i>正在刷新</div> </div>'}($),function(t){function e(e){var n=t(e).data("searchbar"),i=n.options,a=t(e).find("form.weui-search-bar__form");a.off("submit").on("submit",function(t){t.preventDefault(),i.onSearch&&i.onSearch.call(this)}),t(e).off("click").on("click",".search-bar__search-btn",function(t){a.trigger("submit")})}t.fn.searchbar=function(n,i){return n=n||{},this.each(function(){var i=t(this).data("searchbar");i?t.extend(i.options,n):t(this).data("searchbar",{options:t.extend({},t.fn.searchbar.defaults,n)}),e(this)})},t.fn.searchbar.defaults={onSearch:null}}($),function(t){function e(e){var n=t(e).data("select"),i=(n.options,template.compile(r));n.panel=t(i(n.options)).appendTo("body"),n.toolbar=n.panel.children("div.toolbar"),n.list=n.panel.children("div.select__content")}function n(e){var n=t(e).data("select");t(e).off("click").on("click",function(t){s(e)}),n.toolbar.off("click").on("click",".toolbar-close",function(t){l(e)}).on("click",".toolbar-back",function(t){if(0==n.values.length)l(e);else{var i=n.values.splice(n.values.length-1,1);o(e,i[0].items)}}),n.list.off("change").on("change",function(a){var s=t(a.target).val(),r=i(n.items,"value",s);if(n.values.push({item:r,items:n.items}),r&&r.items)o(e,r.items);else{var c=n.values.map(function(t,e){return t.item.text}).join(n.options.split),u=n.values.map(function(t,e){return t.item.value}).join(n.options.split);t(e).val(c).attr("data-values",u),l(e)}})}function i(t,e,n){for(var i=0;i<t.length;i++){var a=t[i];if(a[e]==n)return a}return null}function a(e){var n=t(e).data("select"),i=n.options;i.items=i.items.map(function(t,e){return"string"==typeof t?{text:t,value:t}:t}),o(e,i.items)}function o(e,n){var i=t(e).data("select"),a=(i.options,template.compile(c));i.items=n,i.list.html(a(i))}function s(e){var n=t(e).data("select"),i=n.options;n.values=[],o(e,i.items),n.panel.addClass("select_toggle")}function l(e){var n=t(e).data("select");n.panel.removeClass("select_toggle")}t.fn.select=function(i,o){return"string"==typeof i?t.fn.select.methods[i](this,o):(i=i||{},this.each(function(){var o,s=t(this).data("select");s?o=t.extend(s.options,i):(o=t.extend({},t.fn.select.defaults,i),t(this).data("select",{options:o}),e(this)),a(this),n(this)}))},t.fn.select.methods={options:function(e){return t.data(e[0],"select").options},open:function(t){return t.each(function(){s(this)})},close:function(t){return t.each(function(){l(this)})}},t.fn.select.defaults={items:[],title:"请选择",closeText:"关闭",backText:"返回",onChange:null,onClose:null,onOpen:null,split:" "};var r='<div class="select"> <div class="toolbar"> <div class="toolbar-inner"> <a href="javascript:;" class="toolbar-back">{{backText}}</a> <h1 class="toolbar-title">{{title}}</h1> <a href="javascript:;" class="toolbar-close">{{closeText}}</a></div> </div> <div class="select__content"></div> </div>',c='<div class="weui-cells weui-cells_radio"> {{each items as item i}} <label class="weui-cell weui-check__label"> <div class="weui-cell__bd"> <p>{{item.text}}</p> </div> <div class="weui-cell__ft"> <input type="radio" class="weui-check" name="select" value="{{item.value}}"> <span class="weui-icon-checked"></span> </div> </label> {{/each}} </div>'}($),function(t){function e(e,n){var a=t(e).data("select2"),o=a.options,s=template.compile(i);a.items=n,t(e).html(s(a)),o.onLoadSuccess.call(e,n)}function n(n,i,a){var o=t(n).data("select2").options;i&&(o.url=i),o.url&&(a=a||{},0!=o.onBeforeLoad.call(n,a)&&t.ajax({type:o.method,url:o.url,data:t.toJSON(a),contentType:"application/json",dataType:"json",success:function(t){e(n,t.rows)},error:function(){o.onLoadError.apply(this,arguments)}}))}t.fn.select2=function(i,a){return"string"==typeof i?t.fn.select2.methods[i](this,a):(i=i||{},this.each(function(){var a,o=t(this).data("select2");o?a=t.extend(o.options,i):(a=t.extend({},t.fn.select2.defaults,i),o=t(this).data("select2",{options:a,items:[]})),a.items&&e(this,a.items),n(this)}))},t.fn.select2.methods={loadData:function(t,n){return t.each(function(){e(this,n)})},reload:function(t,e){return t.each(function(){n(this,e)})}},t.fn.select2.defaults={valueField:"value",textField:"text",method:"post",url:null,items:null,onBeforeLoad:function(t){},onLoadSuccess:function(){},onLoadError:function(){}};var i='{{each items as item i}} <option value="{{item.value}}">{{item.text}}</option> {{/each}}'}($),function(t){function e(e){t(e).on("click",".weui-tabbar__item",function(){t(this).addClass("weui-bar__item_on").siblings(".weui-bar__item_on").removeClass("weui-bar__item_on")})}t.fn.tabbar=function(){return this.each(function(){e(this)})}}($),function(t){function e(e){e=e||{};var o=t.extend({},t.toast.defaults,e),s=template.compile(a);n(o),i=t(s(o)).appendTo("body"),0!=o.duration&&setTimeout(function(){n(o)},o.duration)}function n(t){i&&(i.remove(),i=null,t&&t.callback&&t.callback(this))}var i;t.toast=function(e,n){if("string"==typeof e)return t.toast.methods[e](n)},t.toast.methods={show:function(t){"string"==typeof t&&(t={msg:t}),e(t)},showLoading:function(n){e(t.extend({duration:0,msg:"数据加载中",iconCls:"weui-loading"},n))},hideLoading:function(t){n()}},t.toast.defaults={duration:2e3,msg:"操作成功",iconCls:null,callback:null};var a='<div style="display: block;"> <div class="weui-mask_transparent"></div> <div class="weui-toast {{if !iconCls}}toast_plain{{/if}}"> {{if iconCls}} <i class="weui-icon_toast {{iconCls}}"></i> {{/if}} <p class="weui-toast__content">{{msg}}</p> </div> </div>'}($),function(t){function e(e){e=e||{};var o=t.extend({},t.toptip.defaults,e),s=template.compile(a);i&&n(o),i=t(s(o)).appendTo("body"),setTimeout(function(){n(o)},o.duration)}function n(t){i.remove(),i=null,t&&t.callback&&t.callback(this)}var i;t.toptip=function(e,n){if("string"==typeof e)return t.toptip.methods[e](n)},t.toptip.methods={show:function(t){e(t)}},t.toptip.defaults={duration:2e3,msg:"操作成功",callback:null};var a='<div class="weui-toptips weui-toptips_warn" style="display: block;">{{msg}}</div>'}($),function($){function init(t){$(t).addClass("validate-text")}function showTip(t){if(t){var e=$(t).data("validate");$.toptip("show",{msg:e.message})}}function validate(target){function setTipMessage(t){state.message=t.replace(new RegExp("\\{title\\}","g"),opts.title)}function validateRule(validType){var result=/([a-zA-Z_]+)(.*)/.exec(validType),rule=opts.rules[result[1]];if(value&&rule){var param=eval(result[2]);if(!rule.validator.call(target,value,param)){var message=rule.message;if(param)for(var i=0;i<param.length;i++)message=message.replace(new RegExp("\\{"+i+"\\}","g"),param[i]);return setTipMessage(opts.invalidMessage||message),t.addClass("validate-invalid"),!1}}return!0}var state=$(target).data("validate"),opts=state.options,t=$(target),value=t.val();if(opts.required&&(""===value||null===value))return setTipMessage(opts.missingMessage),t.addClass("validate-invalid"),!1;if(opts.validType)if($.isArray(opts.validType)){for(var i=0;i<opts.validType.length;i++)if(!validateRule(opts.validType[i]))return!1}else if(!validateRule(opts.validType))return!1;return t.removeClass("validate-invalid"),!0}$.fn.validate=function(t,e){return"string"==typeof t?$.fn.validate.methods[t](this,e):(t=t||{},this.each(function(){var e=$(this).data("validate");e?$.extend(e.options,t):$(this).data("validate",{options:$.extend({},$.fn.validate.defaults,$.fn.validate.parseOptions(this),t)}),init(this)}))},$.fn.validate.methods={options:function(t){return t.data("validate").options},validate:function(t){return t.each(function(){validate(this)})},isValid:function(t){return validate(t[0])},showTip:function(t){return showTip(t[0])}},$.fn.validate.parseOptions=function(t){return $.parser.parseOptions(t,["title","required"])},$.fn.validate.defaults={title:null,required:!1,validType:null,missingMessage:"{title}为必输项",invalidMessage:null,rules:{length:{validator:function(t,e){var n=$.trim(t).length;return n>=e[0]&&n<=e[1]},message:"{title}输入内容长度必须介于{0}和{1}之间"}}}}($);