<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>业务变更</title>
    <link rel="stylesheet" href="../js/lib/weuijs/style/weuijs.css">
    <style type="text/css">
    body {
        background-color: #f8f8f8;
    }
    
    .weui-cell__bd {
        position: relative;
    }
    </style>
</head>

<body>
    <div class="page page_show">
    <form method="post" action="">
        <div class="weui-cells weui-cells_form" id="demo-form">
            <!--
        <div class="weui-cell weui-cell_select weui-cell_select-after">
            <div class="weui-cell__hd">
                <label for="" class="weui-label">账户类型</label>
            </div>
            <div class="weui-cell__bd">
                <select class="weui-select" name="select2">
                    <option value="1">对公账户</option>
                    <option value="2">对私账户</option>
                </select>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__hd">
                <label class="weui-label">开户名称</label>
            </div>
            <div class="weui-cell__bd">
                <input class="weui-input" type="text" placeholder="请输入开户名称">
            </div>
        </div>
-->
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <div class="weui-uploader">
                        <div class="weui-uploader__hd">
                            <p class="weui-uploader__title">照片</p>
                        </div>
                        <div class="weui-uploader__bd">
                            <ul class="weui-uploader__files">
                                <!-- <li class="weui-uploader__file" style="background-image:url(./images/pic_160.png)"></li>
                        <li class="weui-uploader__file" style="background-image:url(./images/pic_160.png)"></li>-->
                            </ul>
                            <div class="weui-uploader__input-box">
                                <!-- <input id="uploaderInput" class="weui-uploader__input" type="file" accept="image/*" multiple> -->
                                <input type="button" class="weui-uploader__input" onclick="showChooseActions()">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    </div>
    <div id="page2" class="page">
        <div class="weui-cells__title" style="margin: 1em auto; text-align: center; font-size: 18px; color: #000;">选择照片类型</div>
        <div id="photo-cells" class="weui-cells">
            <!-- <div class="weui-cell weui-cell_access">
                <div class="weui-cell__bd">
                    <p>营业执照照片</p>
                </div>
                <div class="weui-cell__ft">
                </div>
            </div> -->
        </div>
        <div class="weui-btn-area">
            <a href="javascript:" class="weui-btn weui-btn_default" onclick="weui.page.back()">返回</a>
        </div>
    </div>
    <script type="text/javascript" src="../js/lib/zepto.js"></script>
    <script type="text/javascript" src="../js/lib/weuijs/weuijs.js"></script>
    <script id="demo-input" type="text/html">
        <div class="weui-cell weui-cell_access">
            <div class="weui-cell__hd">
                <label class="weui-label">
                    <%=$data.text%>
                </label>
            </div>
            <div class="weui-cell__bd">
                <input class="weui-input" type="text" placeholder="请输入<%=$data.text%>" name="<%=$data.value%>" <%if($data.readonly){%>readonly
                <%}%>>
            </div>
            <%if(!$data.readonly){%>
                <div class="weui-cell__ft">
                </div>
                <%}%>
        </div>
    </script>
    <script id="demo-select" type="text/html">
        <div class="weui-cell weui-cell_select weui-cell_select-after">
            <div class="weui-cell__hd">
                <label for="" class="weui-label">账户类型</label>
            </div>
            <div class="weui-cell__bd">
                <select class="weui-select" name="select2">
                    <option value="1">对公账户</option>
                    <option value="2">对私账户</option>
                </select>
            </div>
        </div>
    </script>
    <script id="demo" type="text/html">
        <div class="weui-cells weui-cells_form">
            <%for(var i = 0; i < rows.length; i++) { var row = rows[i];%>
                <%=render(row)%>
                    <%}%>
        </div>
    </script>
    <script id="photo-template" type="text/html">
        <%for(var i = 0; i < $data.length; i++) { var row = $data[i];%>
        <div class="weui-cell weui-cell_access" data-id="<%=row.value%>">
            <div class="weui-cell__bd">
                <p><%=row.text%></p>
            </div>
            <div class="weui-cell__ft">
            </div>
        </div>
        <%}%>
    </script>
    <script>
    var query = $.parseQueryString();

    $.template.helper('render', function(field) {
        return $.template('demo-input', field);
    });


    var photocopy = [
    {
        value:'01',
        text: '营业执照照片'
    },{
        value:'03',
        text: '法人身份证照片'
    },{
        value:'16',
        text: '结算账户(银行卡)照片'
    },{
        value:'02',
        text: '税务登记证照片'
    }];

    $('#photo-cells').append($.template('photo-template', photocopy)).on('click', '.weui-cell', function () {
        alert($(this).attr('data-id'));
        weui.page.back();
    });

    $.ajax({
        url: '/app/action/ms/parameter/list',
        type: 'POST',
        contentType: 'application/json',
        dataType: 'json',
        data: JSON.stringify({
            fielditem: '1',
            selected: '1',
            table_name: query.table_name
        }),
        error: function() {
            console.log(arguments);
            searchPage.loaded(false);
        },
        success: function(data) {
            console.log(arguments);
            var html = $.template('demo', data);

            $('#demo-form').prepend(html);
        },
        complete: function() {
            // loading.hide();
        }
    });

    function showChooseActions() {
        weui.page.show('#page2');
    }
    </script>
</body>

</html>
