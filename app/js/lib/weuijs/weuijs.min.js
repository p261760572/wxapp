!function(){function e(e,t,a){function o(){o=$.noop,l.addClass(s?"weui-animate-fade-out":"weui-animate-slide-down"),d.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){u.remove(),i=!1})}function r(){o()}if(i)return i;e=e||[],t=t||[],a=a||{};var s=$.os.android;a=$.extend({menus:e,actions:t,className:"",isAndroid:s},a);var u=$($.render(n,a)),l=u.find(".weui-actionsheet"),d=u.find(".weui-mask");return $("body").append(u),l.addClass(s?"weui-animate-fade-in":"weui-animate-slide-up"),d.addClass("weui-animate-fade-in").on("click",r),u.find(".weui-actionsheet__menu").on("click",".weui-actionsheet__cell",function(i){var n=$(this).index();e[n].onClick.call(this,i),r()}),u.find(".weui-actionsheet__action").on("click",".weui-actionsheet__cell",function(e){var i=$(this).index();t[i].onClick.call(this,e),r()}),i=u[0],i.hide=r,i}var i,n='<div class="{{if isAndroid}}weui-skin_android {{/if}}{{className}}"><div class="weui-mask"></div><div class="weui-actionsheet"><div class="weui-actionsheet__menu">{{each menus as menu}}<div class="weui-actionsheet__cell {{menu.className}}">{{menu.label }}</div>{{/each}}</div><div class="weui-actionsheet__action">{{each actions as action}}<div class="weui-actionsheet__cell {{action.className}}">{{action.label}}</div>{{/each}}</div></div></div>';window.weui=window.weui||{},window.weui.actionSheet=e}(),function(){function e(e,i,n){return i=i||$.noop,"object"==typeof i&&(n=i,i=$.noop),n=$.extend({content:e,buttons:[{label:"确定",type:"primary",onClick:i}]},n),weui.dialog(n)}window.weui=window.weui||{},window.weui.alert=e}(),function(){function e(e,i,n,t){return i=i||$.noop,n=n||$.noop,"object"==typeof i?(t=i,i=$.noop):"object"==typeof n&&(t=n,n=$.noop),t=$.extend({content:e,buttons:[{label:"取消",type:"default",onClick:n},{label:"确定",type:"primary",onClick:i}]},t),weui.dialog(t)}window.weui=window.weui||{},window.weui.confirm=e}(),function(){function e(e){function t(){t=$.noop,u.addClass("weui-animate-fade-out"),s.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){r.remove(),i=!1})}function a(){t()}if(i)return i;e=e||{};var o=$.os.android;e=$.extend({title:null,content:"",className:"",buttons:[{label:"确定",type:"primary",onClick:$.noop}],isAndroid:o},e);var r=$($.render(n,e)),s=r.find(".weui-dialog"),u=r.find(".weui-mask");return $("body").append(r),u.addClass("weui-animate-fade-in"),s.addClass("weui-animate-fade-in"),r.on("click",".weui-dialog__btn",function(i){var n=$(this).index();e.buttons[n].onClick?e.buttons[n].onClick.call(this,i)!==!1&&a():a()}),i={hide:a}}var i,n='<div class="{{className}}"><div class="weui-mask"></div><div class="weui-dialog {{if isAndroid}} weui-skin_android{{/if}}">{{if title}}<div class="weui-dialog__hd"><strong class="weui-dialog__title">{{title}}</strong></div>{{/if}}<div class="weui-dialog__bd">{{content}}</div><div class="weui-dialog__ft">{{each buttons as button}}<a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_{{button.type}}">{{button.label}}</a>{{/each}}</div></div></div>';window.weui=window.weui||{},window.weui.dialog=e}(),function(){function e(e,t){function a(e){0!=t.onStepChanging(v,e)&&(r(),o(e),t.onStepChanged(e,v),v=e)}function o(e){c.eq(e).show(),p.find(".weui-wepay-flow__li").each(function(i,n){i<=e?$(n).addClass("weui-wepay-flow__li_done"):$(n).removeClass("weui-wepay-flow__li_done")}),p.find(".weui-wepay-flow__line").each(function(i,n){i<e?$(n).addClass("weui-wepay-flow__line_done"):$(n).removeClass("weui-wepay-flow__line_done")}),e==c.length-1?h.children(".flow__btn_next").hide().siblings().show():0==e?h.children(".flow__btn_next").show().siblings().hide():h.children(".flow__btn_finish").hide().siblings().show(),$("body").scrollTop(0)}function r(){c.eq(v).hide()}function s(){a(v+1)}function u(){a(v-1)}function l(e){r(v),o(e),v=e}t=t||{};for(var d=$(e),c=d.children(".flow__step"),f=[],w=0;w<c.length;w++)f.push({title:c[w].title});t=$.extend({finishText:"完成",nextText:"下一步",previousText:"上一步",onStepChanging:$.noop,onStepChanged:$.noop,onFinishing:$.noop,onFinished:$.noop},t,{steps:f});var p=$($.render(i,t)),h=$($.render(n,t)),v=0;return d.prepend(p).append(h),o(v),p.on("click",".weui-wepay-flow__li",function(){var e=parseInt($(this).attr("data-index"));a(e)}),h.on("click",".flow__btn_finish",function(){0!=t.onFinishing(v)&&t.onFinished(v)}).on("click",".flow__btn_next",function(){s()}).on("click",".flow__btn_previous",function(){u()}),_obj={next:s,prev:u,start:l},_obj}var i='<div class="weui-wepay-flow"><div class="weui-wepay-flow__bd">{{each steps as step i}}<div class="weui-wepay-flow__li" data-index="{{i}}"><div class="weui-wepay-flow__state">{{i+1}}</div><p class="weui-wepay-flow__title-{{if i%2==0}}bottom{{else}}top{{/if}}">{{step.title}}</p></div>{{if i != steps.length-1}}<div class="weui-wepay-flow__line" data-index="{{i+1}}"><div class="weui-wepay-flow__process"></div></div>{{/if}}{{/each}}</div></div>',n='<div class="weui-btn-area btn-area"><a class="weui-btn weui-btn_default flow__btn_previous" href="javascript:;">{{previousText}}</a><a class="weui-btn weui-btn_primary flow__btn_next" href="javascript:">{{nextText}}</a><a class="weui-btn weui-btn_primary flow__btn_finish" href="javascript:">{{finishText}}</a></div>';window.weui=window.weui||{},window.weui.flow=e}(),function(){function _validate($input,$form,rules){var input=$input[0],val=$input.val();if("INPUT"==input.tagName||"TEXTAREA"==input.tagName){var reg=$input.attr("pattern")||"",validType=$input.attr("validtype")||"";if("radio"==input.type){for(var $radioInputs=$form.find('input[type="radio"][name="'+input.name+'"]'),i=0,len=$radioInputs.length;i<len;++i)if($radioInputs[i].checked)return null;return"missing"}if("checkbox"==input.type){for(var $checkboxInputs=$form.find('input[type="checkbox"][name="'+input.name+'"]'),count="",i=0,len=$checkboxInputs.length;i<len;++i)$checkboxInputs[i].checked&&(count+="1");return $input.is("[required]")&&!count.length?"missing":new RegExp("^1"+reg+"$").test(count)?null:"invalid"}if($input.is("[required]")&&!val.length)return"missing";if(val.length){var result=null;if(reg&&(result=new RegExp(reg).test(val)?null:"invalid"),validType){var arr=/(\w+)(.*)/.exec(validType),rule=rules[arr[1]];if(rule){var param=eval(arr[2]);result=rule(val,param)?null:"invalid"}}return result}}else if($input.is("[required]")&&!val.length)return"missing";return null}function _showErrorMsg(e){if(e){var i=$(e.ele),n=e.msg,t=i.attr(n+"Tips")||i.attr("tips")||i.attr("placeholder");if(t&&weui.topTips(t),"checkbox"==e.ele.type||"radio"==e.ele.type)return;i.closest(".weui-cell").addClass("weui-cell_warn")}}function validate(e,i){var n=$(e);i=i||{},i=$.extend({callback:$.noop},i);var t=!0;return n.each(function(e,n){for(var a=$(n),o=a.find("[required],[pattern],[validType]"),r=0,s=o.length;r<s;++r){var u=o.eq(r),l=_validate(u,a,i.rules),d={ele:u[0],msg:l};if(l)return i.callback(d)||_showErrorMsg(d),t=!1,!1}}),t}function checkIfBlur(e,i){var n=$(e);i=i||{},n.forEach(function(e){var n=$(e);n.find("[required],[pattern],[validType]").on("blur",function(){if("checkbox"!=this.type&&"radio"!=this.type){var e=$(this);if(!(e.val().length<1)){var t=_validate(e,n,i.rules);t&&_showErrorMsg({ele:e[0],msg:t})}}}).on("focus",function(){$(this).closest(".weui-cell").removeClass("weui-cell_warn")})})}function load(e,i){function n(e,i){for(var n in i){var a=i[n];t(e,n,a)||(e.find('input[name="'+n+'"]').val(a),e.find('textarea[name="'+n+'"]').val(a),e.find('select[name="'+n+'"]').val(a))}}function t(e,i,n){var t=e.find('input[name="'+i+'"][type=radio], input[name="'+i+'"][type=checkbox]');return!!t.length&&(t.forEach(function(e){$ele=$(e),a($ele.val(),n)&&$ele.prop("checked",!0)}),!0)}function a(e,i){return e==String(i)||$.inArray(e,$.isArray(i)?i:[i])>=0}var o=$(e);return o.forEach(function(e){var t=$(e);n(t,i)}),this}function clear(e){$(e).find("input,textarea,select").forEach(function(e){var i=e.type,n=e.tagName;"INPUT"==n||"TEXTAREA"==n?"checkbox"==i||"radio"==i?e.checked=!1:e.value="":e.selectedIndex=-1})}window.weui=window.weui||{},window.weui.form={validate:validate,checkIfBlur:checkIfBlur,load:load,clear:clear}}(),function(){function e(e,t){function a(){a=$.noop,r.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){r.remove(),i=!1})}function o(){a()}if(i)return i;t=t||{},t=$.extend({className:"",deletable:!0,onDelete:$.noop},t);var r=$($.render(n,$.extend({url:e},t)));return $("body").append(r),r.find(".weui-gallery__img").on("click",o),r.find(".weui-gallery__del").on("click",function(){t.onDelete.call(this,e)}),r.show().addClass("weui-animate-fade-in"),i={hide:o}}var i,n='<div class="weui-gallery {{className}}"><span class="weui-gallery__img" style="background-image: url({{url}}); {{if !deletable}}bottom: 0;{{/if}}">{{url}}</span>{{if deletable}}<div class="weui-gallery__opr"><a href="javascript:" class="weui-gallery__del"><i class="weui-icon-delete weui-icon_gallery-delete"></i></a></div>{{/if}}</div>';window.weui=window.weui||{},window.weui.gallery=e}(),function(){function e(e,t){function a(){a=$.noop,u.addClass("weui-animate-fade-out"),s.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){r.remove(),i=!1})}function o(){a()}if(i)return i;t=t||{},t=$.extend({content:e,className:""},t);var r=$($.render(n,t)),s=r.find(".weui-toast"),u=r.find(".weui-mask");return $("body").append(r),s.addClass("weui-animate-fade-in"),u.addClass("weui-animate-fade-in"),i=r[0],i.hide=o,i}var i,n='<div class="weui-loading_toast {{className}}"><div class="weui-mask_transparent"></div><div class="weui-toast"><i class="weui-loading weui-icon_toast"></i><p class="weui-toast__content">{{content}}</p></div></div>';window.weui=window.weui||{},window.weui.loading=e}(),function(){function e(e,n){function t(){t=$.noop,l.remove()}function a(){t()}function o(){d||(l.show(),l.children().hide(),l.find(".weui-loadmore").eq(0).show(),n.onLoad(n.pageNumber,n.pageSize))}function r(e){n.pageNumber=e||1,o()}function s(e){d=!1,l.children().hide(),1==e?(n.pageNumber++,l.find(".weui-footer").show()):0==e&&l.find(".weui-loadmore_line").show()}var u=$(e);n=n||{},n=$.extend({pageNumber:1,pageSize:20,onLoad:$.noop},n);var l=$($.render(i,n)),d=!1;return u.append(l),l.find(".weui-footer__link").on("click",function(){o()}),{hide:a,loading:r,loaded:s}}var i='<div class="{{className}}" style="display: none;"><div class="weui-footer" style="margin:1.5em auto;"><p class="weui-footer__links"><a href="javascript:void(0);" class="weui-footer__link">加载更多数据</a></p></div><div class="weui-loadmore"><i class="weui-loading"></i><span class="weui-loadmore__tips">正在加载</span></div><div class="weui-loadmore weui-loadmore_line"><span class="weui-loadmore__tips">暂无更多数据</span></div></div>';window.weui=window.weui||{},window.weui.loadmore=e}(),function(){function e(e){i(),a=e,e.addClass("page_show weui-animate-fade-in")}function i(){a.removeClass("page_show weui-animate-fade-in")}function n(i){o.push(a),e($(i))}function t(){if(o.length>0){var i=o.pop();e(i)}}var a,o=[];a=$("body").children(".page_show"),window.weui=window.weui||{},window.weui.page={show:n,back:t}}(),function(){function e(i){var n=1;return i.children&&i.children[0]&&(n=e(i.children[0])+1),n}function i(e,i,n){this._dates=e[0],this._months=e[1],this._days=e[2],this._start=i,this._end=n,this._pointer=i}function n(e,i){var n,t=i[0],a=i[1],o=[];e=e.replace(/\*/g,t+"-"+a);for(var r=e.split(","),s=0,u=r.length;s<u;s++){var l=r[s];l.match(w)&&l.replace(w,function(e,i,r,s){s=parseInt(s)||1,i=Math.min(Math.max(t,~~Math.abs(i)),a),r=r?Math.min(a,~~Math.abs(r)):i,n=i;do o.push(n),n+=s;while(n<=r)})}return o}function t(e,t,a){var o=e.replace(/^\s\s*|\s\s*$/g,"").split(/\s+/),r=[];return o.forEach(function(e,i){var t=p[i];r.push(n(e,t))}),new i(r,t,a)}function a(e,i){return e.css({"-webkit-transition":"all "+i+"s",transition:"all "+i+"s"})}function o(e,i){return e.css({"-webkit-transform":"translate3d(0, "+i+"px, 0)",transform:"translate3d(0, "+i+"px, 0)"})}function r(e){for(var i=Math.floor(e.length/2),n=0;e[i]&&e[i].disabled;)if(i=++i%e.length,n++,n>e.length)throw new Error("No selectable item.");return i}function s(e,i,n){var t=r(n);return(e-t)*i}function u(e,i){return e*i}function l(e,i,n){return-(i*(n-e-1))}function d(e){this.label=e.label,this.value=e.value}function c(){function i(){$("body").append(w),w.find(".weui-mask").addClass("weui-animate-fade-in"),w.find(".weui-picker").addClass("weui-animate-slide-up")}function n(){n=$.noop,w.find(".weui-mask").addClass("weui-animate-fade-out"),w.find(".weui-picker").addClass("weui-animate-slide-down").on("animationend webkitAnimationEnd",function(){w.remove(),_=!1})}function t(){n()}function a(e,i){if(void 0===f[i]&&s.defaultValue&&void 0!==s.defaultValue[i]){for(var n=s.defaultValue[i],t=0,o=e.length;t<o&&n!=e[t].value;++t);t<o?f[i]=t:console.warn("Picker has not match defaultValue: "+n)}w.find(".weui-picker__group").eq(i).scroll({items:e,temp:f[i],onChange:function(e,n){if(e?c[i]=new d(e):c[i]=null,f[i]=n,u)s.onChange(c);else if(e.children&&e.children.length>0)w.find(".weui-picker__group").eq(i+1).show(),!u&&a(e.children,i+1);else{var t=w.find(".weui-picker__group");t.forEach(function(e,n){n>i&&$(e).hide()}),c.splice(i+1),s.onChange(c)}},onConfirm:s.onConfirm})}if(_)return _;var o,r=arguments[arguments.length-1],s=$.extend({id:"default",className:"",onChange:$.noop,onConfirm:$.noop},r),u=!1;if(arguments.length>2){var l=0;for(o=[];l<arguments.length-1;)o.push(arguments[l++]);u=!0}else o=arguments[0];for(var c=[],f=[],w=$($.render(h,s)),p=r.depth||(u?o.length:e(o[0])),m="";p--;)m+=v;return w.find(".weui-picker__bd").html(m),i(),u?o.forEach(function(e,i){a(e,i)}):a(o,0),w.on("click",".weui-mask",t).on("click",".weui-picker__action",t).on("click","#weui-picker-confirm",function(){s.onConfirm(c)}),_=w[0],_.hide=t,_}function f(e){var i=$.extend({id:"datePicker",onChange:$.noop,onConfirm:$.noop,start:2e3,end:2030,cron:"* * *"},e);"number"==typeof i.start?i.start=new Date(i.start+"-01-01"):"string"==typeof i.start&&(i.start=new Date(i.start)),"number"==typeof i.end?i.end=new Date(i.end+"-12-31"):"string"==typeof i.end&&(i.end=new Date(i.end));var n,a=function(e,i,n){for(var t=0,a=e.length;t<a;t++){var o=e[t];if(o[i]==n)return o}},o=[],r=t(i.cron,i.start,i.end);do{n=r.next();var s=n.value.getFullYear(),u=n.value.getMonth()+1,l=n.value.getDate(),d=a(o,"value",s);d||(d={label:s+"年",value:s,children:[]},o.push(d));var f=a(d.children,"value",u);f||(f={label:u+"月",value:u,children:[]},d.children.push(f)),f.children.push({label:l+"日",value:l})}while(!n.done);return c(o,i)}var w=/^(\d+)(?:-(\d+))?(?:\/(\d+))?$/g,p=[[1,31],[1,12],[0,6]];i.prototype._findNext=function(){for(var e;;){if(this._end.getTime()-this._pointer.getTime()<=0)throw new Error("out of range, end is "+this._end+", current is "+this._pointer);var i=this._pointer.getMonth(),n=this._pointer.getDate(),t=this._pointer.getDay();if(this._months.indexOf(i+1)!==-1)if(this._dates.indexOf(n)!==-1){if(this._days.indexOf(t)!==-1){e=new Date(this._pointer);break}this._pointer.setDate(n+1)}else this._pointer.setDate(n+1);else this._pointer.setMonth(i+1),this._pointer.setDate(1)}return e},i.prototype.next=function(){var e=this._findNext();return this._pointer.setDate(this._pointer.getDate()+1),{value:e,done:!this.hasNext()}},i.prototype.hasNext=function(){try{return this._findNext(),!0}catch(e){return!1}},$.fn.scroll=function(e){function i(e){v+=e,v=Math.round(v/c.rowHeight)*c.rowHeight;var i=u(c.offset,c.rowHeight),n=l(c.offset,c.rowHeight,c.items.length);v>i&&(v=i),v<n&&(v=n);for(var t=c.offset-v/c.rowHeight;c.items[t]&&c.items[t].disabled;)e>0?++t:--t;v=(c.offset-t)*c.rowHeight,a(_,.3),o(_,v),c.onChange.call(this,c.items[t],t)}function n(e){w=e,h=+new Date}function t(e){p=e;var i=p-w;a(_,0),o(_,v+i),h=+new Date,m.push({time:h,y:p}),m.length>40&&m.shift()}function d(e){if(w){var n=(new Date).getTime(),t=g-c.bodyHeight/2;if(p=e,n-h>100)i(Math.abs(p-w)>10?p-w:t-p);else if(Math.abs(p-w)>10){for(var a=m.length-1,o=a,r=a;r>0&&h-m[r].time<100;r--)o=r;if(o!==a){var s=m[a],u=m[o],l=s.time-u.time,d=s.y-u.y,f=d/l,v=150*f+(p-w);i(v)}else i(0)}else i(t-p);w=null}}var c=$.extend({items:[],scrollable:".weui-picker__content",offset:3,rowHeight:34,onChange:$.noop,temp:null,bodyHeight:238},e),f=c.items.map(function(e){return'<div class="weui-picker__item'+(e.disabled?" weui-picker__item_disabled":"")+'">'+e.label+"</div>"}).join("");$(this).find(".weui-picker__content").html(f);var w,p,h,v,_=$(this).find(c.scrollable),m=[],g=window.innerHeight;if(null!==c.temp&&c.temp<c.items.length){var b=c.temp;c.onChange.call(this,c.items[b],b),v=(c.offset-b)*c.rowHeight}else{var b=r(c.items);c.onChange.call(this,c.items[b],b),v=s(c.offset,c.rowHeight,c.items)}o(_,v),_=$(this).off().on("touchstart",function(e){n(e.changedTouches[0].pageY),e.stopPropagation(),e.preventDefault()}).on("touchmove",function(e){t(e.changedTouches[0].pageY),e.stopPropagation(),e.preventDefault()}).on("touchend",function(e){d(e.changedTouches[0].pageY),e.stopPropagation(),e.preventDefault()}).on("mousedown",function(e){n(e.pageY),e.stopPropagation(),e.preventDefault()}).on("mousemove",function(e){w&&(t(e.pageY),e.stopPropagation(),e.preventDefault())}).on("mouseup mouseleave",function(e){d(e.pageY),e.stopPropagation(),e.preventDefault()}).find(c.scrollable)};var h='<div class="{{className}}"><div class="weui-mask"></div><div class="weui-picker"><div class="weui-picker__hd"><a href="javascript:;" data-action="cancel" class="weui-picker__action">取消</a><a href="javascript:;" data-action="select" class="weui-picker__action" id="weui-picker-confirm">确定</a></div><div class="weui-picker__bd"></div></div></div>',v='<div class="weui-picker__group"><div class="weui-picker__mask"></div><div class="weui-picker__indicator"></div><div class="weui-picker__content"></div></div>';d.prototype.toString=function(){return this.value},d.prototype.valueOf=function(){return this.value};var _;window.weui=window.weui||{},window.weui.picker=c,window.weui.datePicker=f}(),function(){function e(e,i,n){var t=$(e);i=i||$.noop,n=n||$.noop,t.forEach(function(e){function t(){r.val(""),a.removeClass("weui-search-bar_focusing"),n()}var a=$(e),o=a.find(".weui-search-bar__label"),r=a.find(".weui-search-bar__input"),s=a.find(".weui-icon-clear"),u=a.find(".weui-search-bar__cancel-btn"),l=a.find(".weui-search-bar__form");o.on("click",function(){a.addClass("weui-search-bar_focusing"),r[0].focus()}),r.on("blur",function(){this.value.length||t()}),s.on("click",function(){r.val(""),r[0].focus()}),u.on("click",function(){t(),r[0].blur()}),l.on("submit",function(e){e.preventDefault(),i()})});var a={};return a}window.weui=window.weui||{},window.weui.searchBar=e}(),function(){function e(e,i){function n(){d.loaded(),weui.form.clear(u),l.html("")}function t(){return weui.page.show(e),n(),c}function a(e){return d.loaded(e),c}function o(){return u.submit(),c}i=i||{};var r=$(e),s=r.children(".weui-search-bar"),u=s.children("form"),l=r.children(".searchbar-result");i=$.extend({onSearch:$.noop,onCancelSearch:$.noop},i);var d=weui.loadmore(r,{onLoad:function(e,n){var t=u.serializeObject();$.extend(t,{page:e,rows:n}),console.log(t),i.onSearch(l,t)}});weui.searchBar(s,function(){l.html(""),d.loading()},function(){i.onCancelSearch()});var c={show:t,loaded:a,search:o};return c}window.weui=window.weui||{},window.weui.searchPage=e}(),function(){function e(e,i){var n=$(e);if(i=i||{},i=$.extend({step:void 0,defaultValue:0,onChange:$.noop},i),void 0!==i.step&&(i.step=parseFloat(i.step),!i.step||i.step<0))throw new Error("Slider step must be a positive number.");if(void 0!==i.defaultValue&&i.defaultValue<0||i.defaultValue>100)throw new Error("Slider defaultValue must be >= 0 and <= 100.");return n.forEach(function(e){function n(){var e=u.css("left");return e=/%/.test(e)?l*parseFloat(e)/100:parseFloat(e)}function t(n){var t,o;i.step&&(n=Math.round(n/a)*a),t=c+n,t=t<0?0:t>l?l:t,o=100*t/l,s.css({width:o+"%"}),u.css({left:o+"%"}),i.onChange.call(e,o)}var a,o=$(e),r=o.find(".weui-slider__inner"),s=o.find(".weui-slider__track"),u=o.find(".weui-slider__handler"),l=r.width(),d=r[0].offsetLeft,c=0,f=0;i.step&&(a=l*i.step/100),i.defaultValue&&t(l*i.defaultValue/100),o.on("click",function(e){e.preventDefault(),c=n(),t(e.pageX-d-c)}),u.on("touchstart",function(e){c=n(),f=e.changedTouches[0].clientX}).on("touchmove",function(e){e.preventDefault(),t(e.changedTouches[0].clientX-f)})}),this}window.weui=window.weui||{},window.weui.slider=e}(),function(){function e(e,i){var n=$(e);return i=i||{},i=$.extend({defaultIndex:0,onChange:$.noop},i),n.forEach(function(e){var n=$(e),t=n.find(".weui-navbar__item, .weui-tabbar__item"),a=n.find(".weui-tab__content");t.eq(i.defaultIndex).addClass("weui-bar__item_on"),a.eq(i.defaultIndex).show(),t.on("click",function(){var e=$(this),n=e.index();t.removeClass("weui-bar__item_on"),e.addClass("weui-bar__item_on"),a.hide(),a.eq(n).show(),i.onChange.call(this,n)})}),this}window.weui=window.weui||{},window.weui.tab=e}(),function(){function e(e,t){if(i)return i;t=t||{},"number"==typeof t&&(t={duration:t}),"function"==typeof t&&(t={callback:t}),t=$.extend({content:e,duration:3e3,callback:$.noop,className:""},t);var a=$($.render(n,t)),o=a.find(".weui-toast"),r=a.find(".weui-mask");return $("body").append(a),o.addClass("weui-animate-fade-in"),r.addClass("weui-animate-fade-in"),setTimeout(function(){r.addClass("weui-animate-fade-out"),o.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){a.remove(),i=!1,t.callback()})},t.duration),i=a[0],a[0]}var i,n='<div class="{{className}}"><div class="weui-mask_transparent"></div><div class="weui-toast"><i class="weui-icon_toast weui-icon-success-no-circle"></i><p class="weui-toast__content">{{content}}</p></div></div>';window.weui=window.weui||{},window.weui.toast=e}(),function(){function e(e,t){function a(){a=$.noop,r.remove(),t.callback(),i=null}function o(){a()}t=t||{},"number"==typeof t&&(t={duration:t}),"function"==typeof t&&(t={callback:t}),t=$.extend({content:e,duration:3e3,callback:$.noop,className:""},t);var r=$($.render(n,t));return $("body").append(r),i&&(clearTimeout(i.timeout),i.hide()),i={hide:o},i.timeout=setTimeout(o,t.duration),r[0].hide=o,r[0]}var i=null,n='<div class="weui-toptips weui-toptips_warn {{className}}" style="display: block;">{{content}}</div>';window.weui=window.weui||{},window.weui.topTips=e}(),function(){function e(e){var i,n=e.naturalHeight,t=document.createElement("canvas");t.width=1,t.height=n;var a=t.getContext("2d");a.drawImage(e,0,0);try{i=a.getImageData(0,0,1,n).data}catch(e){return console.log("Cannot check verticalSquash: CORS?"),1}for(var o=0,r=n,s=n;s>o;){var u=i[4*(s-1)+3];0===u?r=s:o=s,s=r+o>>1}var l=s/n;return 0===l?1:l}function i(e){for(var i=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(i.length),a=new Uint8Array(t),o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return new Blob([t],{type:n})}function n(n,t,a){var o=new FileReader;o.onload=function(o){if(t.compress===!1)return n.base64=o.target.result,void a(n);var r=new Image;r.onload=function(){var o,s=e(r),u=document.createElement("canvas"),l=u.getContext("2d"),d=t.compress.width,c=t.compress.height,f=r.width,w=r.height;if(f<w&&w>c?(f=parseInt(c*r.width/r.height),w=c):f>=w&&f>d&&(w=parseInt(d*r.height/r.width),f=d),u.width=f,u.height=w,l.drawImage(r,0,0,f,w/s),o=/image\/jpeg/.test(n.type)||/image\/jpg/.test(n.type)?u.toDataURL("image/jpeg",t.compress.quality):u.toDataURL(n.type),"file"==t.type)if(/;base64,null/.test(o)||/;base64,$/.test(o))console.warn("Compress fail, dataURL is "+o+". Next will use origin file to upload."),a(n);else{var p=i(o);p.id=n.id,p.name=n.name,p.lastModified=n.lastModified,p.lastModifiedDate=n.lastModifiedDate,a(p)}else/;base64,null/.test(o)||/;base64,$/.test(o)?(t.onError(n,new Error("Compress fail, dataURL is "+o+".")),a()):(n.base64=o,a(n))},r.src=o.target.result},o.readAsDataURL(n)}function t(e){var i=e.url,n=e.file,t=e.fileVal,a=e.onBeforeSend,o=e.onProgress,r=e.onError,s=e.onSuccess,u=n.name,l=n.type,d=n.lastModifiedDate,c={name:u,type:l,size:"file"==e.type?n.size:n.base64.length,lastModifiedDate:d},f={};if(a(n,c,f)!==!1){n.status="progress",o(n,0);var w=new FormData,p=new XMLHttpRequest;n.xhr=p,Object.keys(c).forEach(function(e){w.append(e,c[e])}),"file"==e.type?w.append(t,n,u):w.append(t,n.base64),p.onreadystatechange=function(){if(4==p.readyState)if(200==p.status)try{var e=JSON.parse(p.responseText);s(n,e)}catch(e){r(n,e)}else r(n,new Error("XMLHttpRequest response status is "+p.status))},p.upload.addEventListener("progress",function(e){if(0!=e.total){var i=100*Math.ceil(e.loaded/e.total);o(n,i)}},!1),p.open("POST",i),Object.keys(f).forEach(function(e){p.setRequestHeader(e,f[e])}),p.send(w)}}function a(e,i){function a(e,i){var n=e.find('[data-id="'+i+'"]'),t=n.find(".weui-uploader__file-content");return t.length||(t=$('<div class="weui-uploader__file-content"></div>'),n.append(t)),n.addClass("weui-uploader__file_status"),t}function s(e,i){var n=e.find('[data-id="'+i+'"]').removeClass("weui-uploader__file_status");n.find(".weui-uploader__file-content").remove()}function u(e){e.url=d.createObjectURL(e),e.status="ready",e.upload=function(){t($.extend({$uploader:l,file:e},i))},e.stop=function(){this.xhr.abort()},i.onQueued(e),i.auto&&e.upload()}var l=$(e),d=window.URL||window.webkitURL||window.mozURL;if(i=$.extend({url:"",auto:!0,type:"file",fileVal:"file",onBeforeQueued:$.noop,onQueued:$.noop,onBeforeSend:$.noop,onSuccess:$.noop,onProgress:$.noop,onError:$.noop},i),i.compress!==!1&&(i.compress=$.extend({width:1600,height:1600,quality:.8},i.compress)),i.onBeforeQueued){var c=i.onBeforeQueued;i.onBeforeQueued=function(e,i){var n=c.call(e,i);if(n===!1)return!1;if(n!==!0){var t=$($.render(o,{id:e.id}));l.find(".weui-uploader__files").append(t)}}}if(i.onQueued){var f=i.onQueued;i.onQueued=function(e){if(!f.call(e)){var n=l.find('[data-id="'+e.id+'"]');n.css({backgroundImage:'url("'+(e.base64||e.url)+'")'}),i.auto||s(l,e.id)}}}if(i.onBeforeSend){var w=i.onBeforeSend;i.onBeforeSend=function(e,i,n){var t=w.call(e,i,n);if(t===!1)return!1}}if(i.onSuccess){var p=i.onSuccess;i.onSuccess=function(e,i){e.status="success",p.call(e,i)||s(l,e.id)}}if(i.onProgress){var h=i.onProgress;i.onProgress=function(e,i){h.call(e,i)||a(l,e.id).html(i+"%")}}if(i.onError){var v=i.onError;i.onError=function(e,i){e.status="fail",v.call(e,i)||a(l,e.id).html('<i class="weui-icon-warn"></i>')}}l.find('input[type="file"]').on("change",function(e){var t=e.target.files;0!==t.length&&(i.compress===!1&&"file"==i.type?Array.prototype.forEach.call(t,function(e){e.id=++r,i.onBeforeQueued(e,t)!==!1&&u(e)}):Array.prototype.forEach.call(t,function(e){e.id=++r,i.onBeforeQueued(e,t)!==!1&&n(e,i,function(e){e&&u(e)})}),this.value="")})}var o='<li class="weui-uploader__file weui-uploader__file_status" data-id="{{id}}"><div class="weui-uploader__file-content"><i class="weui-loading" style="width: 30px;height: 30px;"></i></div></li>',r=0;window.weui=window.weui||{},window.weui.uploader=a}();