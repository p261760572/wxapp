!function(){function e(e,t,a){function o(){o=$.noop,u.addClass(l?"weui-animate-fade-out":"weui-animate-slide-down"),d.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){s.remove(),i=!1})}function r(){o()}if(i)return i;e=e||[],t=t||[],a=a||{};var l=$.os.android;a=$.extend({menus:e,actions:t,className:"",isAndroid:l},a);var s=$($.render(n,a)),u=s.find(".weui-actionsheet"),d=s.find(".weui-mask");return $("body").append(s),u.addClass(l?"weui-animate-fade-in":"weui-animate-slide-up"),d.addClass("weui-animate-fade-in").on("click",r),s.find(".weui-actionsheet__menu").on("click",".weui-actionsheet__cell",function(i){var n=$(this).index();e[n].onClick.call(this,i),r()}),s.find(".weui-actionsheet__action").on("click",".weui-actionsheet__cell",function(e){var i=$(this).index();t[i].onClick.call(this,e),r()}),i=s[0],i.hide=r,i}var i,n='<div class="{{if isAndroid}}weui-skin_android {{/if}}{{className}}"><div class="weui-mask"></div><div class="weui-actionsheet"><div class="weui-actionsheet__menu">{{each menus as menu}}<div class="weui-actionsheet__cell {{menu.className}}">{{menu.label }}</div>{{/each}}</div><div class="weui-actionsheet__action">{{each actions as action}}<div class="weui-actionsheet__cell {{action.className}}">{{action.label}}</div>{{/each}}</div></div></div>';window.weui=window.weui||{},window.weui.actionSheet=e}(),function(){function e(e,i,n){return i=i||$.noop,"object"==typeof i&&(n=i,i=$.noop),n=$.extend({content:e,buttons:[{label:"确定",type:"primary",onClick:i}]},n),weui.dialog(n)}window.weui=window.weui||{},window.weui.alert=e}(),function(){function e(e,i,n,t){return i=i||$.noop,n=n||$.noop,"object"==typeof i?(t=i,i=$.noop):"object"==typeof n&&(t=n,n=$.noop),t=$.extend({content:e,buttons:[{label:"取消",type:"default",onClick:n},{label:"确定",type:"primary",onClick:i}]},t),weui.dialog(t)}window.weui=window.weui||{},window.weui.confirm=e}(),function(){function e(e){function t(){t=$.noop,s.addClass("weui-animate-fade-out"),l.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){r.remove(),i=!1})}function a(){t()}if(i)return i;e=e||{};var o=$.os.android;e=$.extend({title:null,content:"",className:"",buttons:[{label:"确定",type:"primary",onClick:$.noop}],isAndroid:o},e);var r=$($.render(n,e)),l=r.find(".weui-dialog"),s=r.find(".weui-mask");return $("body").append(r),s.addClass("weui-animate-fade-in"),l.addClass("weui-animate-fade-in"),r.on("click",".weui-dialog__btn",function(i){var n=$(this).index();e.buttons[n].onClick?e.buttons[n].onClick.call(this,i)!==!1&&a():a()}),i={hide:a}}var i,n='<div class="{{className}}"><div class="weui-mask"></div><div class="weui-dialog {{if isAndroid}} weui-skin_android{{/if}}">{{if title}}<div class="weui-dialog__hd"><strong class="weui-dialog__title">{{title}}</strong></div>{{/if}}<div class="weui-dialog__bd">{{content}}</div><div class="weui-dialog__ft">{{each buttons as button}}<a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_{{button.type}}">{{button.label}}</a>{{/each}}</div></div></div>';window.weui=window.weui||{},window.weui.dialog=e}(),function(){function e(e,t){function a(e){0!=t.onStepChanging(v,e)&&(r(),o(e),t.onStepChanged(e,v),v=e)}function o(e){c.eq(e).show(),p.find(".weui-wepay-flow__li").each(function(i,n){i<=e?$(n).addClass("weui-wepay-flow__li_done"):$(n).removeClass("weui-wepay-flow__li_done")}),p.find(".weui-wepay-flow__line").each(function(i,n){i<e?$(n).addClass("weui-wepay-flow__line_done"):$(n).removeClass("weui-wepay-flow__line_done")}),e==c.length-1?h.children(".flow__btn_next").hide().siblings().show():0==e?h.children(".flow__btn_next").show().siblings().hide():h.children(".flow__btn_finish").hide().siblings().show(),$("body").scrollTop(0)}function r(){c.eq(v).hide()}function l(){a(v+1)}function s(){a(v-1)}function u(e){r(v),o(e),v=e}t=t||{};for(var d=$(e),c=d.children(".flow__step"),f=[],w=0;w<c.length;w++)f.push({title:c[w].title});t=$.extend({finishText:"完成",nextText:"下一步",previousText:"上一步",onStepChanging:$.noop,onStepChanged:$.noop,onFinishing:$.noop,onFinished:$.noop},t,{steps:f});var p=$($.render(i,t)),h=$($.render(n,t)),v=0;return d.prepend(p).append(h),o(v),p.on("click",".weui-wepay-flow__li",function(){var e=parseInt($(this).attr("data-index"));a(e)}),h.on("click",".flow__btn_finish",function(){0!=t.onFinishing(v)&&t.onFinished(v)}).on("click",".flow__btn_next",function(){l()}).on("click",".flow__btn_previous",function(){s()}),_obj={next:l,prev:s,start:u},_obj}var i='<div class="weui-wepay-flow"><div class="weui-wepay-flow__bd">{{each steps as step i}}<div class="weui-wepay-flow__li" data-index="{{i}}"><div class="weui-wepay-flow__state">{{i+1}}</div><p class="weui-wepay-flow__title-{{if i%2==0}}bottom{{else}}top{{/if}}">{{step.title}}</p></div>{{if i != steps.length-1}}<div class="weui-wepay-flow__line" data-index="{{i+1}}"><div class="weui-wepay-flow__process"></div></div>{{/if}}{{/each}}</div></div>',n='<div class="weui-btn-area btn-area"><a class="weui-btn weui-btn_default flow__btn_previous" href="javascript:;">{{previousText}}</a><a class="weui-btn weui-btn_primary flow__btn_next" href="javascript:">{{nextText}}</a><a class="weui-btn weui-btn_primary flow__btn_finish" href="javascript:">{{finishText}}</a></div>';window.weui=window.weui||{},window.weui.flow=e}(),function(){function _validate($input,$form,rules){var input=$input[0],val=$input.val();if("INPUT"==input.tagName||"TEXTAREA"==input.tagName){var reg=$input.attr("pattern")||"",validType=$input.attr("validtype")||"";if("radio"==input.type){for(var $radioInputs=$form.find('input[type="radio"][name="'+input.name+'"]'),i=0,len=$radioInputs.length;i<len;++i)if($radioInputs[i].checked)return null;return"missing"}if("checkbox"==input.type){for(var $checkboxInputs=$form.find('input[type="checkbox"][name="'+input.name+'"]'),count="",i=0,len=$checkboxInputs.length;i<len;++i)$checkboxInputs[i].checked&&(count+="1");return $input.is("[required]")&&!count.length?"missing":new RegExp("^1"+reg+"$").test(count)?null:"invalid"}if($input.is("[required]")&&!val.length)return"missing";if(val.length){var result=null;if(reg&&(result=new RegExp(reg).test(val)?null:"invalid"),validType){var arr=/(\w+)(.*)/.exec(validType),rule=rules[arr[1]];if(rule){var param=eval(arr[2]);result=rule(val,param)?null:"invalid"}}return result}}else if($input.is("[required]")&&!val.length)return"missing";return null}function _showErrorMsg(e){if(e){var i=$(e.ele),n=e.msg,t=i.attr(n+"Tips")||i.attr("tips")||i.attr("placeholder");if(t&&weui.topTips(t),"checkbox"==e.ele.type||"radio"==e.ele.type)return;i.closest(".weui-cell").addClass("weui-cell_warn")}}function validate(e,i){var n=$(e);i=i||{},i=$.extend({callback:$.noop},i);var t=!0;return n.each(function(e,n){for(var a=$(n),o=a.find("[required],[pattern],[validType]"),r=0,l=o.length;r<l;++r){var s=o.eq(r),u=_validate(s,a,i.rules),d={ele:s[0],msg:u};if(u)return i.callback(d)||_showErrorMsg(d),t=!1,!1}}),t}function checkIfBlur(e,i){var n=$(e);i=i||{},n.forEach(function(e){var n=$(e);n.find("[required],[pattern],[validType]").on("blur",function(){if("checkbox"!=this.type&&"radio"!=this.type){var e=$(this);if(!(e.val().length<1)){var t=_validate(e,n,i.rules);t&&_showErrorMsg({ele:e[0],msg:t})}}}).on("focus",function(){$(this).closest(".weui-cell").removeClass("weui-cell_warn")})})}function load(e,i){function n(e,i){for(var n in i){var a=i[n];t(e,n,a)||(e.find('input[name="'+n+'"]').val(a),e.find('textarea[name="'+n+'"]').val(a),e.find('select[name="'+n+'"]').val(a))}}function t(e,i,n){var t=e.find('input[name="'+i+'"][type=radio], input[name="'+i+'"][type=checkbox]');return!!t.length&&(t.forEach(function(e){$ele=$(e),a($ele.val(),n)&&$ele.prop("checked",!0)}),!0)}function a(e,i){return e==String(i)||$.inArray(e,$.isArray(i)?i:[i])>=0}var o=$(e);return o.forEach(function(e){var t=$(e);n(t,i)}),this}function clear(e){$(e).find("input,textarea,select").forEach(function(e){var i=e.type,n=e.tagName;"INPUT"==n||"TEXTAREA"==n?"checkbox"==i||"radio"==i?e.checked=!1:e.value="":e.selectedIndex=-1})}window.weui=window.weui||{},window.weui.form={validate:validate,checkIfBlur:checkIfBlur,load:load,clear:clear}}(),function(){function e(e,t){function a(){a=$.noop,r.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){r.remove(),i=!1})}function o(){a()}if(i)return i;t=t||{},t=$.extend({className:"",deletable:!0,onDelete:$.noop},t);var r=$($.render(n,$.extend({url:e},t)));return $("body").append(r),r.find(".weui-gallery__img").on("click",o),r.find(".weui-gallery__del").on("click",function(){t.onDelete.call(this,e)}),r.show().addClass("weui-animate-fade-in"),i={hide:o}}var i,n='<div class="weui-gallery {{className}}"><span class="weui-gallery__img" style="background-image: url({{url}}); {{if !deletable}}bottom: 0;{{/if}}">{{url}}</span>{{if deletable}}<div class="weui-gallery__opr"><a href="javascript:" class="weui-gallery__del"><i class="weui-icon-delete weui-icon_gallery-delete"></i></a></div>{{/if}}</div>';window.weui=window.weui||{},window.weui.gallery=e}(),function(){function e(e,t){function a(){a=$.noop,s.addClass("weui-animate-fade-out"),l.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){r.remove(),i=!1})}function o(){a()}if(i)return i;t=t||{},t=$.extend({content:e,className:""},t);var r=$($.render(n,t)),l=r.find(".weui-toast"),s=r.find(".weui-mask");return $("body").append(r),l.addClass("weui-animate-fade-in"),s.addClass("weui-animate-fade-in"),i=r[0],i.hide=o,i}var i,n='<div class="weui-loading_toast {{className}}"><div class="weui-mask_transparent"></div><div class="weui-toast"><i class="weui-loading weui-icon_toast"></i><p class="weui-toast__content">{{content}}</p></div></div>';window.weui=window.weui||{},window.weui.loading=e}(),function(){function e(e,n){function t(){u.hide()}function a(){t()}function o(){d||(u.show(),u.children().hide(),u.find(".weui-loadmore").eq(0).show(),n.onLoad(n.pageNumber,n.pageSize))}function r(e){n.pageNumber=e||1,o()}function l(e){d=!1,u.children().hide(),1==e?(n.pageNumber++,u.find(".weui-footer").show()):u.find(".weui-loadmore_line").show()}var s=$(e);n=n||{},n=$.extend({pageNumber:1,pageSize:20,onLoad:$.noop},n);var u=$($.render(i,n)),d=!1;return s.append(u),u.find(".weui-footer__link").on("click",function(){o()}),{hide:a,loading:r,loaded:l}}var i='<div class="{{className}}" style="display: none;"><div class="weui-footer" style="margin:1.5em auto;"><p class="weui-footer__links"><a href="javascript:void(0);" class="weui-footer__link">加载更多数据</a></p></div><div class="weui-loadmore"><i class="weui-loading"></i><span class="weui-loadmore__tips">正在加载</span></div><div class="weui-loadmore weui-loadmore_line"><span class="weui-loadmore__tips">暂无更多数据</span></div></div>';window.weui=window.weui||{},window.weui.loadmore=e}(),function(){function e(e){i(),a=e,e.addClass("page_show weui-animate-fade-in")}function i(){a.removeClass("page_show weui-animate-fade-in")}function n(i){o.push(a),e($(i))}function t(){if(o.length>0){var i=o.pop();e(i)}}var a,o=[];a=$("body").children(".page_show"),window.weui=window.weui||{},window.weui.page={show:n,back:t}}(),function(){function e(i){var n=1;return i.children&&i.children[0]&&(n=e(i.children[0])+1),n}function i(e,i,n){this._dates=e[0],this._months=e[1],this._days=e[2],this._start=i,this._end=n,this._pointer=i}function n(e,i){var n,t=i[0],a=i[1],o=[];e=e.replace(/\*/g,t+"-"+a);for(var r=e.split(","),l=0,s=r.length;l<s;l++){var u=r[l];u.match(f)&&u.replace(f,function(e,i,r,l){l=parseInt(l)||1,i=Math.min(Math.max(t,~~Math.abs(i)),a),r=r?Math.min(a,~~Math.abs(r)):i,n=i;do o.push(n),n+=l;while(n<=r)})}return o}function t(e,t,a){var o=e.replace(/^\s\s*|\s\s*$/g,"").split(/\s+/),r=[];return o.forEach(function(e,i){var t=w[i];r.push(n(e,t))}),new i(r,t,a)}function a(e,i){return e.css({"-webkit-transition":"all "+i+"s",transition:"all "+i+"s"})}function o(e,i){return e.css({"-webkit-transform":"translate3d(0, "+i+"px, 0)",transform:"translate3d(0, "+i+"px, 0)"})}function r(e){for(var i=Math.floor(e.length/2),n=0;e[i]&&e[i].disabled;)if(i=++i%e.length,n++,n>e.length)throw new Error("No selectable item.");return i}function l(e,i,n){var t=r(n);return(e-t)*i}function s(e,i){return e*i}function u(e,i,n){return-(i*(n-e-1))}function d(){function i(){$("body").append(f),f.find(".weui-mask").addClass("weui-animate-fade-in"),f.find(".weui-picker").addClass("weui-animate-slide-up")}function n(){n=$.noop,f.find(".weui-mask").addClass("weui-animate-fade-out"),f.find(".weui-picker").addClass("weui-animate-slide-down").on("animationend webkitAnimationEnd",function(){f.remove(),p=!1})}function t(){n()}function a(e,i){if(void 0===c[i]&&l.defaultValue&&void 0!==l.defaultValue[i]){for(var n=l.defaultValue[i],t=0,o=e.length;t<o&&n!=e[t].value;++t);t<o?c[i]=t:console.warn("Picker has not match defaultValue: "+n)}f.find(".weui-picker__group").eq(i).scroll({valueField:l.valueField,textField:l.textField,items:e,temp:c[i],onChange:function(e,n){if(e?d[i]=e:d[i]=null,c[i]=n,s)l.onChange(d);else if(e.children&&e.children.length>0)f.find(".weui-picker__group").eq(i+1).show(),!s&&a(e.children,i+1);else{var t=f.find(".weui-picker__group");t.forEach(function(e,n){n>i&&$(e).hide()}),d.splice(i+1),l.onChange(d)}}})}if(p)return p;var o,r=arguments[arguments.length-1],l=$.extend({id:"default",className:"",valueField:"value",textField:"label",onChange:$.noop,onConfirm:$.noop},r),s=!1;if(arguments.length>2){var u=0;for(o=[];u<arguments.length-1;)o.push(arguments[u++]);s=!0}else o=arguments[0];for(var d=[],c=[],f=$($.render(h,l)),w=r.depth||(s?o.length:e(o[0])),_="";w--;)_+=v;return f.find(".weui-picker__bd").html(_),i(),s?o.forEach(function(e,i){a(e,i)}):a(o,0),f.on("click",".weui-mask",t).on("click",".weui-picker__action",t).on("click","#weui-picker-confirm",function(){l.onConfirm(d)}),p=f[0],p.hide=t,p}function c(e){var i=$.extend({id:"datePicker",onChange:$.noop,onConfirm:$.noop,start:2e3,end:2030,cron:"* * *"},e);"number"==typeof i.start?i.start=new Date(i.start+"-01-01"):"string"==typeof i.start&&(i.start=new Date(i.start)),"number"==typeof i.end?i.end=new Date(i.end+"-12-31"):"string"==typeof i.end&&(i.end=new Date(i.end));var n,a=function(e,i,n){for(var t=0,a=e.length;t<a;t++){var o=e[t];if(o[i]==n)return o}},o=[],r=t(i.cron,i.start,i.end);do{n=r.next();var l=n.value.getFullYear(),s=n.value.getMonth()+1,u=n.value.getDate(),c=a(o,"value",l);c||(c={label:l+"年",value:l,children:[]},o.push(c));var f=a(c.children,"value",s);f||(f={label:s+"月",value:s,children:[]},c.children.push(f)),f.children.push({label:u+"日",value:u})}while(!n.done);return d(o,i)}var f=/^(\d+)(?:-(\d+))?(?:\/(\d+))?$/g,w=[[1,31],[1,12],[0,6]];i.prototype._findNext=function(){for(var e;;){if(this._end.getTime()-this._pointer.getTime()<=0)throw new Error("out of range, end is "+this._end+", current is "+this._pointer);var i=this._pointer.getMonth(),n=this._pointer.getDate(),t=this._pointer.getDay();if(this._months.indexOf(i+1)!==-1)if(this._dates.indexOf(n)!==-1){if(this._days.indexOf(t)!==-1){e=new Date(this._pointer);break}this._pointer.setDate(n+1)}else this._pointer.setDate(n+1);else this._pointer.setMonth(i+1),this._pointer.setDate(1)}return e},i.prototype.next=function(){var e=this._findNext();return this._pointer.setDate(this._pointer.getDate()+1),{value:e,done:!this.hasNext()}},i.prototype.hasNext=function(){try{return this._findNext(),!0}catch(e){return!1}},$.fn.scroll=function(e){function i(e){v+=e,v=Math.round(v/c.rowHeight)*c.rowHeight;var i=s(c.offset,c.rowHeight),n=u(c.offset,c.rowHeight,c.items.length);v>i&&(v=i),v<n&&(v=n);for(var t=c.offset-v/c.rowHeight;c.items[t]&&c.items[t].disabled;)e>0?++t:--t;v=(c.offset-t)*c.rowHeight,a(_,.3),o(_,v),c.onChange.call(this,c.items[t],t)}function n(e){w=e,h=+new Date}function t(e){p=e;var i=p-w;a(_,0),o(_,v+i),h=+new Date,m.push({time:h,y:p}),m.length>40&&m.shift()}function d(e){if(w){var n=(new Date).getTime(),t=g-c.bodyHeight/2;if(p=e,n-h>100)i(Math.abs(p-w)>10?p-w:t-p);else if(Math.abs(p-w)>10){for(var a=m.length-1,o=a,r=a;r>0&&h-m[r].time<100;r--)o=r;if(o!==a){var l=m[a],s=m[o],u=l.time-s.time,d=l.y-s.y,f=d/u,v=150*f+(p-w);i(v)}else i(0)}else i(t-p);w=null}}var c=$.extend({valueField:"value",textField:"label",items:[],scrollable:".weui-picker__content",offset:3,rowHeight:34,onChange:$.noop,temp:null,bodyHeight:238},e),f=c.items.map(function(e){return'<div class="weui-picker__item'+(e.disabled?" weui-picker__item_disabled":"")+'">'+e[c.textField]+"</div>"}).join("");$(this).find(".weui-picker__content").html(f);var w,p,h,v,_=$(this).find(c.scrollable),m=[],g=window.innerHeight;if(null!==c.temp&&c.temp<c.items.length){var b=c.temp;c.onChange.call(this,c.items[b],b),v=(c.offset-b)*c.rowHeight}else{var b=r(c.items);c.onChange.call(this,c.items[b],b),v=l(c.offset,c.rowHeight,c.items)}o(_,v),_=$(this).off().on("touchstart",function(e){n(e.changedTouches[0].pageY),e.stopPropagation(),e.preventDefault()}).on("touchmove",function(e){t(e.changedTouches[0].pageY),e.stopPropagation(),e.preventDefault()}).on("touchend",function(e){d(e.changedTouches[0].pageY),e.stopPropagation(),e.preventDefault()}).on("mousedown",function(e){n(e.pageY),e.stopPropagation(),e.preventDefault()}).on("mousemove",function(e){w&&(t(e.pageY),e.stopPropagation(),e.preventDefault())}).on("mouseup mouseleave",function(e){d(e.pageY),e.stopPropagation(),e.preventDefault()}).find(c.scrollable)};var p,h='<div class="{{className}}"><div class="weui-mask"></div><div class="weui-picker"><div class="weui-picker__hd"><a href="javascript:;" data-action="cancel" class="weui-picker__action">取消</a><a href="javascript:;" data-action="select" class="weui-picker__action" id="weui-picker-confirm">确定</a></div><div class="weui-picker__bd"></div></div></div>',v='<div class="weui-picker__group"><div class="weui-picker__mask"></div><div class="weui-picker__indicator"></div><div class="weui-picker__content"></div></div>';window.weui=window.weui||{},window.weui.picker=d,window.weui.datePicker=c}(),function(){function e(e,i,n){i=i||$.noop,n=n||$.noop;var t=$(e);t.forEach(function(e){function t(){r.val(""),a.removeClass("weui-search-bar_focusing")}var a=$(e),o=a.find(".weui-search-bar__label"),r=a.find(".weui-search-bar__input"),l=a.find(".weui-icon-clear"),s=a.find(".weui-search-bar__cancel-btn"),u=a.find(".weui-search-bar__form");o.on("click",function(){a.addClass("weui-search-bar_focusing"),r[0].focus()}),r.on("blur",function(e){this.value.length||t()}).on("input",function(){n(this.value)}),l.on("click",function(){r.val(""),r[0].focus()}),s.on("click",function(){t(),n(null),r[0].blur()}),u.on("submit",function(e){e.preventDefault(),i(r.val())})});var a={};return a}window.weui=window.weui||{},window.weui.searchBar=e}(),function(){function e(e,i){function n(e){var n=$.render(s,$.extend({},i,{rows:e,total:d.length}));p.append(n),d=d.concat(e),p.off("click",".searchbar-result__item").on("click",".searchbar-result__item",function(){var e=parseInt($(this).attr("data-index")),n=isNaN(e)?null:d[e];0!=i.onClickItem.call(this,n)})}function t(e){if(e){for(var n=[],t=0;t<i.data.length;t++)i.filter(e,i.data[t])&&n.push(i.data[t]);return n}return i.data}function a(){"remote"==u&&h.hide(),p.html(""),d=[]}function o(){a(),weui.form.clear(w)}function r(e){return h.loaded(e),v}function l(e){return e&&weui.form.load(w,e),w.submit(),v}i=i||{},i=$.extend({resultTpl:null,data:null,filter:$.noop,loader:$.noop,onInput:$.noop,onClickItem:$.noop},i);var s=i.resultTpl;0===s.indexOf("#")&&(s=$(i.resultTpl).html());var u=i.data?"local":"remote",d=[],c=$(e),f=c.children(".weui-search-bar"),w=f.children("form"),p=c.children(".searchbar-result");if("local"==u)weui.searchBar(f,$.noop,function(e){a(),n(t(e)),i.onInput.apply(this,arguments)}),n(i.data);else{var h=weui.loadmore(c,{onLoad:function(e,t){var a=w.serializeObject();$.extend(a,{page:e,rows:t,total:d.length}),i.loader(a,function(e){n(e),h.loaded(!(e.length<t))},function(){h.hide()})}});weui.searchBar(f,function(){a(),h.loading()},function(){i.onInput.apply(this,arguments)})}var v={clear:o,loaded:r,search:l};return v}window.weui=window.weui||{},window.weui.searchPage=e}(),function(){function e(e){function t(){t=$.noop,r.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){r.remove()})}function a(){t()}e=e||{},e=$.extend({title:"搜索",valueField:"value",textField:"text",onClickItem:$.noop,resultTpl:n,filter:function(i,n){return n[e.textField].indexOf(i)>=0}},e);var o=e.onClickItem;e.onClickItem=function(e){0!=o(e)&&a()};var r=$($.render(i,e)),l=weui.searchPage(r,e);$("body").append(r),r.on("click",".select2__back-btn",function(e){a()});var s={search:l.search,hide:a,options:e};return s}var i='<div class="select2"><div class="weui-search-bar"><a href="javascript:" class="search-bar__btn select2__back-btn">返回</a><form class="weui-search-bar__form" method="post" action=""><div class="weui-search-bar__box"><i class="weui-icon-search"></i><input type="search" class="weui-search-bar__input" name="q" placeholder="{{title}}"><a href="javascript:" class="weui-icon-clear"></a></div><label class="weui-search-bar__label"><i class="weui-icon-search"></i><span>{{title}}</span> </label></form><a href="javascript:" class="weui-search-bar__cancel-btn">取消</a></div><div class="weui-cells searchbar-result"></div></div>',n='{{each rows as row i}}<div class="weui-cell weui-cell_access searchbar-result__item" data-index="{{total+i}}"><div class="weui-cell__bd weui-cell_primary"><p>{{row[textField]}}</p></div><div class="weui-cell__ft"></div></div>{{/each}}';window.weui=window.weui||{},window.weui.select2=e}(),function(){function e(e,i){var n=$(e);if(i=i||{},i=$.extend({step:void 0,defaultValue:0,onChange:$.noop},i),void 0!==i.step&&(i.step=parseFloat(i.step),!i.step||i.step<0))throw new Error("Slider step must be a positive number.");if(void 0!==i.defaultValue&&i.defaultValue<0||i.defaultValue>100)throw new Error("Slider defaultValue must be >= 0 and <= 100.");return n.forEach(function(e){function n(){var e=s.css("left");return e=/%/.test(e)?u*parseFloat(e)/100:parseFloat(e)}function t(n){var t,o;i.step&&(n=Math.round(n/a)*a),t=c+n,t=t<0?0:t>u?u:t,o=100*t/u,l.css({width:o+"%"}),s.css({left:o+"%"}),i.onChange.call(e,o)}var a,o=$(e),r=o.find(".weui-slider__inner"),l=o.find(".weui-slider__track"),s=o.find(".weui-slider__handler"),u=r.width(),d=r[0].offsetLeft,c=0,f=0;i.step&&(a=u*i.step/100),i.defaultValue&&t(u*i.defaultValue/100),o.on("click",function(e){e.preventDefault(),c=n(),t(e.pageX-d-c)}),s.on("touchstart",function(e){c=n(),f=e.changedTouches[0].clientX}).on("touchmove",function(e){e.preventDefault(),t(e.changedTouches[0].clientX-f)})}),this}window.weui=window.weui||{},window.weui.slider=e}(),function(){function e(e,i){var n=$(e);return i=i||{},i=$.extend({defaultIndex:0,onChange:$.noop},i),n.forEach(function(e){var n=$(e),t=n.find(".weui-navbar__item, .weui-tabbar__item"),a=n.find(".weui-tab__content");t.eq(i.defaultIndex).addClass("weui-bar__item_on"),a.eq(i.defaultIndex).show(),t.on("click",function(){var e=$(this),n=e.index();t.removeClass("weui-bar__item_on"),e.addClass("weui-bar__item_on"),a.hide(),a.eq(n).show(),i.onChange.call(this,n)})}),this}window.weui=window.weui||{},window.weui.tab=e}(),function(){function e(e,t){if(i)return i;t=t||{},"number"==typeof t&&(t={duration:t}),"function"==typeof t&&(t={callback:t}),t=$.extend({content:e,duration:3e3,callback:$.noop,className:""},t);var a=$($.render(n,t)),o=a.find(".weui-toast"),r=a.find(".weui-mask");return $("body").append(a),o.addClass("weui-animate-fade-in"),r.addClass("weui-animate-fade-in"),setTimeout(function(){r.addClass("weui-animate-fade-out"),o.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){a.remove(),i=!1,t.callback()})},t.duration),i=a[0],a[0]}var i,n='<div class="{{className}}"><div class="weui-mask_transparent"></div><div class="weui-toast"><i class="weui-icon_toast weui-icon-success-no-circle"></i><p class="weui-toast__content">{{content}}</p></div></div>';window.weui=window.weui||{},window.weui.toast=e}(),function(){function e(e,t){function a(){a=$.noop,r.remove(),t.callback(),i=null}function o(){a()}t=t||{},"number"==typeof t&&(t={duration:t}),"function"==typeof t&&(t={callback:t}),t=$.extend({content:e,duration:3e3,callback:$.noop,className:""},t);var r=$($.render(n,t));return $("body").append(r),i&&(clearTimeout(i.timeout),i.hide()),i={hide:o},i.timeout=setTimeout(o,t.duration),r[0].hide=o,r[0]}var i=null,n='<div class="weui-toptips weui-toptips_warn {{className}}" style="display: block;">{{content}}</div>';window.weui=window.weui||{},window.weui.topTips=e}(),function(){function e(e){var i,n=e.naturalHeight,t=document.createElement("canvas");t.width=1,t.height=n;var a=t.getContext("2d");a.drawImage(e,0,0);try{i=a.getImageData(0,0,1,n).data}catch(e){return console.log("Cannot check verticalSquash: CORS?"),1}for(var o=0,r=n,l=n;l>o;){var s=i[4*(l-1)+3];0===s?r=l:o=l,l=r+o>>1}var u=l/n;return 0===u?1:u}function i(e){for(var i=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(i.length),a=new Uint8Array(t),o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return new Blob([t],{type:n})}function n(n,t,a){var o=new FileReader;o.onload=function(o){if(t.compress===!1)return n.base64=o.target.result,void a(n);var r=new Image;r.onload=function(){var o,l=e(r),s=document.createElement("canvas"),u=s.getContext("2d"),d=t.compress.width,c=t.compress.height,f=r.width,w=r.height;if(f<w&&w>c?(f=parseInt(c*r.width/r.height),w=c):f>=w&&f>d&&(w=parseInt(d*r.height/r.width),f=d),s.width=f,s.height=w,u.drawImage(r,0,0,f,w/l),o=/image\/jpeg/.test(n.type)||/image\/jpg/.test(n.type)?s.toDataURL("image/jpeg",t.compress.quality):s.toDataURL(n.type),"file"==t.type)if(/;base64,null/.test(o)||/;base64,$/.test(o))console.warn("Compress fail, dataURL is "+o+". Next will use origin file to upload."),a(n);else{var p=i(o);p.name=n.name,p.lastModified=n.lastModified,a(p)}else/;base64,null/.test(o)||/;base64,$/.test(o)?(t.onError(n,new Error("Compress fail, dataURL is "+o+".")),a()):(n.base64=o,a(n))},r.src=o.target.result},o.readAsDataURL(n)}function t(e){function i(e){var i=++r,n=$($.render(o,{id:i}));return a.find(".weui-uploader__files").append(n),n.css({backgroundImage:'url("'+e+'")'}),i}function n(e,i){var n=a.find('[data-id="'+e+'"]'),t=n.find(".weui-uploader__file-content");t.length||(t=$('<div class="weui-uploader__file-content"></div>'),n.append(t)),n.addClass("weui-uploader__file_status"),t.html(i)}function t(e){var i=a.find('[data-id="'+e+'"]').removeClass("weui-uploader__file_status");i.find(".weui-uploader__file-content").remove()}var a=$(e);a.on("click",".weui-uploader__file",function(){var e=$(this),i=e.attr("style");console.log(i),i&&(i=i.match(/url\((.*?)\)/)[1].replace(/"/g,""));var n=weui.gallery(i,{onDelete:function(){weui.confirm("确定删除该图片？",function(){e.remove(),n.hide()})}})});var l={appendFile:i,setFileStatus:n,clearFileStatus:t};return l}function a(e,i){function t(e,n){var t={name:e.name,type:e.type,size:"file"==i.type?e.size:e.base64.length},a={};if(i.onBeforeSend(e,t,a,n)===!1)return!1;i.onProgress(e,0);var o=new FormData;Object.keys(t).forEach(function(e){o.append(e,t[e])}),"file"==i.type?o.append(i.fileVal,e,e.name):o.append(i.fileVal,e.base64),$.ajax({url:i.url,type:"POST",data:o,processData:!1,contentType:!1,beforeSend:function(n,t){$.extend(t.headers,a),n.upload.addEventListener("progress",function(n){if(0!=n.total){var t=100*Math.ceil(n.loaded/n.total);i.onProgress(e,t)}},!1)},success:function(n){i.onSuccess(e,n)},error:function(n,t,a){i.onError(e,a)}})}var a=weui.uploader(e),o=$(e);if(i=$.extend({url:"",auto:!0,type:"file",fileVal:"file",onBeforeSend:$.noop,onSuccess:$.noop,onProgress:$.noop,onError:$.noop},i),i.compress!==!1&&(i.compress=$.extend({width:1600,height:1600,quality:.8},i.compress)),i.onBeforeSend){var r=i.onBeforeSend;i.onBeforeSend=function(e,n,t,o){return r.call(e,n,t,o)!==!1&&(e.url=URL.createObjectURL(e),e.id=a.appendFile(e.base64||e.url),void(i.auto||a.clearFileStatus(e.id)))}}if(i.onSuccess){var l=i.onSuccess;i.onSuccess=function(e,i){l.call(e,i)||a.clearFileStatus(e.id)}}if(i.onProgress){var s=i.onProgress;i.onProgress=function(e,i){s.call(e,i)||a.setFileStatus(e.id,i+"%")}}if(i.onError){var u=i.onError;i.onError=function(e,i){u.call(e,i)||a.setFileStatus(e.id,'<i class="weui-icon-warn"></i>')}}o.find('input[type="file"]').on("change",function(e){var a=e.target.files;if(0!==a.length){if(i.compress===!1&&"file"==i.type)for(var o=0;o<a.length;o++){var r=a[o];i.auto&&t(r,a)}else for(var o=0;o<a.length;o++){var r=a[o];n(r,i,function(e){e&&i.auto&&t(e,a)})}this.value=""}})}var o='<li class="weui-uploader__file weui-uploader__file_status" data-id="{{id}}"><div class="weui-uploader__file-content"><i class="weui-loading" style="width: 30px;height: 30px;"></i></div></li>',r=0;window.weui=window.weui||{},window.weui.uploader=t,window.weui.ajaxUploader=a}();